<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì í˜ì´ì§€ | Irum Academy</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/animations.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <style>
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        .login-container {
            max-width: 400px;
            margin: 10rem auto;
            padding: 2rem;
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        .stat-label {
            color: var(--text-muted);
            font-size: 0.875rem;
        }
        .applications-table {
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .table-header {
            background: var(--primary);
            color: white;
            padding: 1rem;
            font-weight: 600;
        }
        .table-content {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th {
            background: #f9fafb;
            font-weight: 600;
            color: var(--text);
            font-size: 0.875rem;
            text-transform: uppercase;
        }
        tr:hover {
            background: #f9fafb;
        }
        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }
        .status-approved {
            background: #d1fae5;
            color: #065f46;
        }
        .status-rejected {
            background: #fee2e2;
            color: #991b1b;
        }
        .application-detail {
            display: none;
            margin-top: 1rem;
            padding: 1rem;
            background: #f9fafb;
            border-radius: 0.5rem;
        }
        .application-detail.active {
            display: block;
        }
        .detail-row {
            display: grid;
            grid-template-columns: 150px 1fr;
            gap: 1rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border);
        }
        .detail-label {
            font-weight: 600;
            color: var(--text-muted);
        }
        .filter-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        .filter-select {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            border-radius: 0.375rem;
            background: white;
        }
        .no-applications {
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }
        .admin-section {
            display: block;
        }
        .admin-tab {
            transition: all 0.3s ease;
        }
        .admin-tab:hover {
            color: var(--primary) !important;
        }
    </style>
</head>
<body>
    <!-- Admin Header -->
    <header class="main-header" style="position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: white; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
        <div class="container">
            <div class="header-content" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem 0;">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <a href="../index.html" class="logo">
                        <img src="../images/logo/ì´ë£¸ì•„ì¹´ë°ë¯¸_logo.png" alt="Irum Academy" class="logo-image" style="height: 60px; width: auto; display: block;" data-original-src="../images/logo/ì´ë£¸ì•„ì¹´ë°ë¯¸_logo.png" onerror="this.onerror=null; if(!this.dataset.retried) { this.dataset.retried='true'; this.src=encodeURI(this.dataset.originalSrc); } else { this.style.display='none'; }">
                    </a>
                    <h1 style="margin: 0; font-size: 1.25rem; font-weight: 600; color: var(--text);">irumcompany ê´€ë¦¬ì</h1>
                </div>
            </div>
        </div>
    </header>

    <!-- Login Screen -->
    <div id="login-screen" class="login-container" style="display: block;">
        <h2 style="text-align: center; margin-bottom: 2rem;">ê´€ë¦¬ì ë¡œê·¸ì¸</h2>
        <form id="login-form">
            <div class="form-group">
                <label for="admin-username" class="form-label">ì•„ì´ë””</label>
                <input type="text" id="admin-username" class="form-input" required>
            </div>
            <div class="form-group">
                <label for="admin-password" class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="admin-password" class="form-input" required>
            </div>
            <button type="submit" class="btn btn-primary btn-lg" style="width: 100%; margin-top: 1rem;">
                ë¡œê·¸ì¸
            </button>
        </form>
    </div>

    <!-- Admin Dashboard -->
    <main class="main-content" id="admin-dashboard" style="display: none; background-color: #f9fafb; padding-top: 120px; padding-bottom: 3rem;">
        <div class="admin-container">
            <div class="admin-header">
                <h1 style="margin: 0;">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
                <div>
                    <button id="export-applications-btn" class="btn btn-outline" style="margin-right: 0.5rem;">
                        ì‹ ì²­ ë‚´ì—­ ì—‘ì…€ ë‚´ë³´ë‚´ê¸°
                    </button>
                    <button id="export-users-btn" class="btn btn-outline" style="margin-right: 0.5rem;">
                        íšŒì› ëª©ë¡ ì—‘ì…€ ë‚´ë³´ë‚´ê¸°
                    </button>
                    <button id="export-inquiries-btn" class="btn btn-outline" style="margin-right: 0.5rem; display: none;">
                        ë¬¸ì˜ ë‚´ì—­ ì—‘ì…€ ë‚´ë³´ë‚´ê¸°
                    </button>
                    <button id="export-login-history-btn" class="btn btn-outline" style="margin-right: 0.5rem; display: none;">
                        ë¡œê·¸ì¸ ì´ë ¥ ì—‘ì…€ ë‚´ë³´ë‚´ê¸°
                    </button>
                    <button id="refresh-btn" class="btn btn-outline" style="margin-right: 0.5rem;">
                        ìƒˆë¡œê³ ì¹¨
                    </button>
                    <button id="logout-btn" class="btn btn-outline">
                        ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div style="display: flex; gap: 0.5rem; margin-bottom: 2rem; border-bottom: 2px solid var(--border);">
                <button class="admin-tab active" data-tab="applications" style="padding: 0.75rem 1.5rem; background: none; border: none; border-bottom: 2px solid var(--primary); color: var(--primary); font-weight: 600; cursor: pointer;">
                    ì‹ ì²­ ê´€ë¦¬
                </button>
                <button class="admin-tab" data-tab="users" style="padding: 0.75rem 1.5rem; background: none; border: none; color: var(--text-muted); font-weight: 600; cursor: pointer;">
                    íšŒì› ê´€ë¦¬
                </button>
                <button class="admin-tab" data-tab="inquiries" style="padding: 0.75rem 1.5rem; background: none; border: none; color: var(--text-muted); font-weight: 600; cursor: pointer;">
                    ë¬¸ì˜ ê´€ë¦¬
                </button>
                <button class="admin-tab" data-tab="notices" style="padding: 0.75rem 1.5rem; background: none; border: none; color: var(--text-muted); font-weight: 600; cursor: pointer;">
                    ê³µì§€ì‚¬í•­ ê´€ë¦¬
                </button>
                <button class="admin-tab" data-tab="login-history" style="padding: 0.75rem 1.5rem; background: none; border: none; color: var(--text-muted); font-weight: 600; cursor: pointer;">
                    ë¡œê·¸ì¸ ì´ë ¥
                </button>
                <button class="admin-tab" data-tab="courses" style="padding: 0.75rem 1.5rem; background: none; border: none; color: var(--text-muted); font-weight: 600; cursor: pointer;">
                    ê³¼ì • ê´€ë¦¬
                </button>
                <button class="admin-tab" data-tab="schedules" style="padding: 0.75rem 1.5rem; background: none; border: none; color: var(--text-muted); font-weight: 600; cursor: pointer;">
                    ì¼ì • ê´€ë¦¬
                </button>
                <button class="admin-tab" data-tab="instructor-program" style="padding: 0.75rem 1.5rem; background: none; border: none; color: var(--text-muted); font-weight: 600; cursor: pointer;">
                    ê°•ì‚¬ í”„ë¡œê·¸ë¨ ê´€ë¦¬
                </button>
                <button class="admin-tab" data-tab="workshop-applications" style="padding: 0.75rem 1.5rem; background: none; border: none; color: var(--text-muted); font-weight: 600; cursor: pointer;">
                    ì„¤ëª…íšŒ ì‹ ì²­ ê´€ë¦¬
                </button>
            </div>

            <!-- Applications Section -->
            <div id="applications-section" class="admin-section">
                <!-- Statistics -->
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-count">0</div>
                        <div class="stat-label">ì „ì²´ ì‹ ì²­</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pending-count">0</div>
                        <div class="stat-label">ëŒ€ê¸° ì¤‘</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="approved-count">0</div>
                        <div class="stat-label">ìŠ¹ì¸ë¨</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="rejected-count">0</div>
                        <div class="stat-label">ê±°ì ˆë¨</div>
                    </div>
                </div>

                <!-- Filter Bar -->
                <div class="filter-bar">
                    <select id="type-filter" class="filter-select">
                        <option value="">ì „ì²´ ìœ í˜•</option>
                        <option value="student">ê°•ì˜ì‹ ì²­</option>
                        <option value="consult">ìƒë‹´ì‹ ì²­</option>
                        <option value="aiw-workshop">AI Workshop ì„¤ëª…íšŒ</option>
                    </select>
                    <input type="text" id="search-input" class="filter-select" placeholder="ì´ë¦„, ì´ë©”ì¼ ê²€ìƒ‰..." style="flex: 1; min-width: 200px;">
                </div>

                <!-- Applications Table -->
                <div class="applications-table">
                    <div class="table-header">ì‹ ì²­ ë‚´ì—­</div>
                    <div class="table-content">
                        <table id="applications-table">
                            <thead>
                                <tr>
                                    <th>ì‹ ì²­ì¼ì‹œ</th>
                                    <th>ì´ë¦„</th>
                                    <th>ì´ë©”ì¼</th>
                                    <th>ì—°ë½ì²˜</th>
                                    <th>ê³¼ì •/ìœ í˜•</th>
                                    <th>í¬ë§ì¼ì •</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="applications-tbody">
                                <tr>
                                    <td colspan="8" class="no-applications">ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Users Section -->
            <div id="users-section" class="admin-section" style="display: none;">
                <!-- User Statistics -->
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-users">0</div>
                        <div class="stat-label">ì „ì²´ íšŒì›</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="active-users">0</div>
                        <div class="stat-label">í™œì„± íšŒì›</div>
                    </div>
                </div>

                <!-- User Filter Bar -->
                <div class="filter-bar">
                    <input type="text" id="user-search-input" class="filter-select" placeholder="ì´ë©”ì¼ ê²€ìƒ‰..." style="flex: 1; min-width: 200px;">
                </div>

                <!-- Users Table -->
                <div class="applications-table">
                    <div class="table-header" style="display: flex; justify-content: space-between; align-items: center;">
                        <span>íšŒì› ëª©ë¡</span>
                        <button id="refresh-users-btn" class="btn btn-sm btn-outline" style="margin-left: 1rem;">
                            ğŸ”„ ìƒˆë¡œê³ ì¹¨
                        </button>
                    </div>
                    <div class="table-content">
                        <table id="users-table">
                            <thead>
                                <tr>
                                    <th>ê°€ì…ì¼ì‹œ</th>
                                    <th>ì´ë¦„</th>
                                    <th>ì´ë©”ì¼</th>
                                    <th>ì „í™”ë²ˆí˜¸</th>
                                    <th>ê°€ì…ë°©ë²•</th>
                                    <th>ìŠ¹ì¸ìƒíƒœ</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="users-tbody">
                                <tr>
                                    <td colspan="7" class="no-applications">íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Inquiries Section -->
            <div id="inquiries-section" class="admin-section" style="display: none;">
                <!-- Inquiry Statistics -->
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-inquiries">0</div>
                        <div class="stat-label">ì „ì²´ ë¬¸ì˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="answered-inquiries">0</div>
                        <div class="stat-label">ë‹µë³€ ì™„ë£Œ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pending-inquiries">0</div>
                        <div class="stat-label">ë‹µë³€ ëŒ€ê¸°</div>
                    </div>
                </div>

                <!-- Inquiry Filter Bar -->
                <div class="filter-bar">
                    <input type="text" id="inquiry-search-input" class="filter-select" placeholder="ì œëª©, ë‚´ìš©, ì‘ì„±ì ê²€ìƒ‰..." style="flex: 1; min-width: 200px;">
                </div>

                <!-- Inquiries Table -->
                <div class="applications-table">
                    <div class="table-header">ë¬¸ì˜ ëª©ë¡</div>
                    <div class="table-content">
                        <table id="inquiries-table">
                            <thead>
                                <tr>
                                    <th>ì‘ì„±ì¼ì‹œ</th>
                                    <th>ì œëª©</th>
                                    <th>ì‘ì„±ì</th>
                                    <th>ì´ë©”ì¼</th>
                                    <th>ë‹µë³€ ìˆ˜</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="inquiries-tbody">
                                <tr>
                                    <td colspan="6" class="no-applications">ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Notices Section -->
            <div id="notices-section" class="admin-section" style="display: none;">
                <!-- Notice Statistics -->
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-notices">0</div>
                        <div class="stat-label">ì „ì²´ ê³µì§€ì‚¬í•­</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="published-notices">0</div>
                        <div class="stat-label">ê²Œì‹œ ì¤‘</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="draft-notices">0</div>
                        <div class="stat-label">ì„ì‹œì €ì¥</div>
                    </div>
                </div>

                <!-- Notice Actions -->
                <div class="filter-bar" style="margin-bottom: 1rem;">
                    <button id="create-notice-btn" class="btn btn-primary">
                        + ê³µì§€ì‚¬í•­ ì‘ì„±
                    </button>
                    <input type="text" id="notice-search-input" class="filter-select" placeholder="ì œëª©, ë‚´ìš© ê²€ìƒ‰..." style="flex: 1; min-width: 200px;">
                </div>

                <!-- Notices Table -->
                <div class="applications-table">
                    <div class="table-header">ê³µì§€ì‚¬í•­ ëª©ë¡</div>
                    <div class="table-content">
                        <table id="notices-table">
                            <thead>
                                <tr>
                                    <th>ì‘ì„±ì¼ì‹œ</th>
                                    <th>ì œëª©</th>
                                    <th>ì‘ì„±ì</th>
                                    <th>ì¡°íšŒìˆ˜</th>
                                    <th>ìƒíƒœ</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="notices-tbody">
                                <tr>
                                    <td colspan="6" class="no-applications">ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Login History Section -->
            <div id="login-history-section" class="admin-section" style="display: none;">
                <!-- Login History Statistics -->
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-logins">0</div>
                        <div class="stat-label">ì „ì²´ ë¡œê·¸ì¸</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="today-logins">0</div>
                        <div class="stat-label">ì˜¤ëŠ˜ ë¡œê·¸ì¸</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="unique-users">0</div>
                        <div class="stat-label">ê³ ìœ  ì‚¬ìš©ì</div>
                    </div>
                </div>

                <!-- Login History Filter Bar -->
                <div class="filter-bar" style="margin-bottom: 1rem;">
                    <input type="text" id="login-search-input" class="filter-select" placeholder="ì´ë©”ì¼ ë˜ëŠ” ì´ë¦„ ê²€ìƒ‰..." style="flex: 1; min-width: 200px;">
                    <input type="date" id="login-date-from" class="filter-select" placeholder="ì‹œì‘ì¼">
                    <input type="date" id="login-date-to" class="filter-select" placeholder="ì¢…ë£Œì¼">
                </div>

                <!-- Selection Mode and Actions -->
                <div class="filter-bar" style="margin-bottom: 1rem; align-items: center;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="selection-mode" value="all" checked>
                            <span>ì „ì²´ì„ íƒ</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="selection-mode" value="partial">
                            <span>ë¶€ë¶„ì„ íƒ</span>
                        </label>
                    </div>
                    <div style="display: flex; gap: 0.5rem; margin-left: auto;">
                        <button id="select-all-logins-btn" class="btn btn-sm btn-outline" style="display: none;">ì „ì²´ ì„ íƒ</button>
                        <button id="deselect-all-logins-btn" class="btn btn-sm btn-outline" style="display: none;">ì „ì²´ í•´ì œ</button>
                        <button id="delete-selected-logins-btn" class="btn btn-sm" style="background: #ef4444; color: white; border: none; display: none;">ì„ íƒ ì‚­ì œ</button>
                        <button id="delete-period-logins-btn" class="btn btn-sm" style="background: #f59e0b; color: white; border: none;">ê¸°ê°„ ì‚­ì œ</button>
                    </div>
                </div>

                <!-- Login History Table -->
                <div class="applications-table">
                    <div class="table-header">ë¡œê·¸ì¸ ì´ë ¥</div>
                    <div class="table-content">
                        <table id="login-history-table">
                            <thead>
                                <tr>
                                    <th style="width: 50px;">
                                        <input type="checkbox" id="select-all-logins-checkbox" style="display: none;">
                                    </th>
                                    <th>ë¡œê·¸ì¸ ì¼ì‹œ</th>
                                    <th>ì´ë¦„</th>
                                    <th>ì´ë©”ì¼</th>
                                    <th>IP ì£¼ì†Œ</th>
                                    <th>ë¸Œë¼ìš°ì €</th>
                                </tr>
                            </thead>
                            <tbody id="login-history-tbody">
                                <tr>
                                    <td colspan="6" class="no-applications">ë¡œê·¸ì¸ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Courses Management Section -->
            <div id="courses-section" class="admin-section" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2>ê³¼ì • ê´€ë¦¬</h2>
                    <button id="add-course-btn" class="btn btn-primary">ê³¼ì • ë“±ë¡</button>
                </div>
                <div class="applications-table">
                    <div class="table-header">ê³¼ì • ê°€ê²© ëª©ë¡</div>
                    <div class="table-content">
                        <table id="courses-table">
                            <thead>
                                <tr>
                                    <th>ê³¼ì •ëª…</th>
                                    <th>ì¹´í…Œê³ ë¦¬</th>
                                    <th>ê°€ê²© (ì›)</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="courses-tbody">
                                <tr>
                                    <td colspan="4" class="no-applications">ê³¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Schedules Management Section -->
            <div id="schedules-section" class="admin-section" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2>ì¼ì • ê´€ë¦¬</h2>
                    <button id="add-schedule-btn" class="btn btn-primary">ì¼ì • ì¶”ê°€</button>
                </div>
                <div class="applications-table">
                    <div class="table-header">ì¼ì • ëª©ë¡</div>
                    <div class="table-content">
                        <table id="schedules-table">
                            <thead>
                                <tr>
                                    <th>ê³¼ì •ëª…</th>
                                    <th>ì‹œì‘ì¼</th>
                                    <th>ìƒíƒœ</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="schedules-tbody">
                                <tr>
                                    <td colspan="4" class="no-applications">ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Instructor Program Management Section -->
            <div id="instructor-program-section" class="admin-section" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2>ê°•ì‚¬ ì„±ì¥ í”„ë¡œê·¸ë¨ ê´€ë¦¬</h2>
                </div>
                
                <!-- Program Info -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-header">
                        <h3 class="card-title">í”„ë¡œê·¸ë¨ ì •ë³´</h3>
                    </div>
                    <div class="card-content">
                        <div class="form-group">
                            <label for="instructor-program-title" class="form-label">í”„ë¡œê·¸ë¨ëª…</label>
                            <input type="text" id="instructor-program-title" class="form-input" placeholder="ê°•ì‚¬ ì„±ì¥ í”„ë¡œê·¸ë¨">
                        </div>
                        <div class="form-group">
                            <label for="instructor-program-description" class="form-label">í”„ë¡œê·¸ë¨ ì„¤ëª…</label>
                            <textarea id="instructor-program-description" class="form-input" rows="4" placeholder="í”„ë¡œê·¸ë¨ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                        </div>
                        <button id="save-program-info-btn" class="btn btn-primary">í”„ë¡œê·¸ë¨ ì •ë³´ ì €ì¥</button>
                    </div>
                </div>

                <!-- Program Schedules -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h3>í”„ë¡œê·¸ë¨ ì¼ì • ê´€ë¦¬</h3>
                    <button id="add-instructor-schedule-btn" class="btn btn-primary">ì¼ì • ì¶”ê°€</button>
                </div>
                <div class="applications-table">
                    <div class="table-header">í”„ë¡œê·¸ë¨ ì¼ì • ëª©ë¡</div>
                    <div class="table-content">
                        <table id="instructor-schedules-table">
                            <thead>
                                <tr>
                                    <th>ì¼ì •</th>
                                    <th>ìƒíƒœ</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="instructor-schedules-tbody">
                                <tr>
                                    <td colspan="3" class="no-applications">ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Consult Schedules -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 2rem; margin-bottom: 1.5rem;">
                    <h3>Zoom ìƒë‹´ ì¼ì • ê´€ë¦¬</h3>
                    <button id="add-consult-schedule-btn" class="btn btn-primary">ìƒë‹´ ì¼ì • ì¶”ê°€</button>
                </div>
                <div class="applications-table">
                    <div class="table-header">ìƒë‹´ ì¼ì • ëª©ë¡</div>
                    <div class="table-content">
                        <table id="consult-schedules-table">
                            <thead>
                                <tr>
                                    <th>ì¼ì •</th>
                                    <th>ì‹œê°„</th>
                                    <th>ìƒíƒœ</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="consult-schedules-tbody">
                                <tr>
                                    <td colspan="4" class="no-applications">ìƒë‹´ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Workshop Applications Section -->
            <div id="workshop-applications-section" class="admin-section" style="display: none;">
                <!-- Workshop Statistics -->
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-workshop-applications">0</div>
                        <div class="stat-label">ì „ì²´ ì„¤ëª…íšŒ ì‹ ì²­</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pending-workshop-applications">0</div>
                        <div class="stat-label">ëŒ€ê¸° ì¤‘</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="approved-workshop-applications">0</div>
                        <div class="stat-label">ìŠ¹ì¸ë¨</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="curriculum-request-count">0</div>
                        <div class="stat-label">ì»¤ë¦¬í˜ëŸ¼ ìš”ì²­</div>
                    </div>
                </div>

                <!-- Workshop Filter Bar -->
                <div class="filter-bar">
                    <input type="text" id="workshop-search-input" class="filter-select" placeholder="ì´ë¦„, ì—°ë½ì²˜ ê²€ìƒ‰..." style="flex: 1; min-width: 200px;">
                    <select id="workshop-status-filter" class="filter-select">
                        <option value="">ì „ì²´ ìƒíƒœ</option>
                        <option value="pending">ëŒ€ê¸° ì¤‘</option>
                        <option value="approved">ìŠ¹ì¸ë¨</option>
                        <option value="rejected">ê±°ì ˆë¨</option>
                    </select>
                    <select id="workshop-curriculum-filter" class="filter-select">
                        <option value="">ì»¤ë¦¬í˜ëŸ¼ ìš”ì²­</option>
                        <option value="true">ìš”ì²­í•¨</option>
                        <option value="false">ìš”ì²­ ì•ˆí•¨</option>
                    </select>
                </div>

                <!-- Workshop Applications Table -->
                <div class="applications-table">
                    <div class="table-header">ì„¤ëª…íšŒ ì‹ ì²­ ë‚´ì—­</div>
                    <div class="table-content">
                        <table id="workshop-applications-table">
                            <thead>
                                <tr>
                                    <th>ì‹ ì²­ì¼ì‹œ</th>
                                    <th>ì´ë¦„</th>
                                    <th>ì—°ë½ì²˜</th>
                                    <th>ì»¤ë¦¬í˜ëŸ¼ ìš”ì²­</th>
                                    <th>ìƒíƒœ</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="workshop-applications-tbody">
                                <tr>
                                    <td colspan="6" class="no-applications">ì„¤ëª…íšŒ ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Application Detail Modal -->
    <div id="detail-modal" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div id="modal-backdrop" style="position: absolute; inset: 0; cursor: pointer;"></div>
        <div style="position: relative; z-index: 1001; background: white; border-radius: 0.5rem; padding: 2rem; max-width: 800px; max-height: 90vh; overflow-y: auto; margin: 1rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;">ì‹ ì²­ ìƒì„¸ ì •ë³´</h2>
                <button id="close-modal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0; width: 2rem; height: 2rem; display: flex; align-items: center; justify-content: center;">&times;</button>
            </div>
            <div id="detail-content"></div>
            <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                <button id="approve-btn" class="btn btn-primary">ìŠ¹ì¸</button>
                <button id="reject-btn" class="btn" style="background: #ef4444; color: white;">ê±°ì ˆ</button>
            </div>
        </div>
    </div>

    <!-- Notice Edit Modal -->
    <div id="notice-modal" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div id="notice-modal-backdrop" style="position: absolute; inset: 0; cursor: pointer;"></div>
        <div style="position: relative; z-index: 1001; background: white; border-radius: 0.5rem; padding: 2rem; max-width: 900px; max-height: 90vh; overflow-y: auto; margin: 1rem; width: 100%;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;" id="notice-modal-title">ê³µì§€ì‚¬í•­ ì‘ì„±</h2>
                <button id="close-notice-modal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0; width: 2rem; height: 2rem; display: flex; align-items: center; justify-content: center;">&times;</button>
            </div>
            <form id="notice-form">
                <div class="form-group">
                    <label for="notice-title" class="form-label">ì œëª©</label>
                    <input type="text" id="notice-title" class="form-input" placeholder="ê³µì§€ì‚¬í•­ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                <div class="form-group">
                    <label for="notice-content" class="form-label">ë‚´ìš©</label>
                    <textarea id="notice-content" class="form-input" rows="10" placeholder="ê³µì§€ì‚¬í•­ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required style="resize: vertical; min-height: 200px;"></textarea>
                </div>
                <div class="form-group">
                    <label for="notice-tags" class="form-label">íƒœê·¸ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
                    <input type="text" id="notice-tags" class="form-input" placeholder="ì˜ˆ: ê³µì§€, ì¼ì •, ì•ˆë‚´">
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="notice-published">
                        <span>ì¦‰ì‹œ ê²Œì‹œ</span>
                    </label>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                    <button type="button" id="cancel-notice-btn" class="btn btn-outline">ì·¨ì†Œ</button>
                    <button type="button" id="save-notice-draft-btn" class="btn btn-outline">ì„ì‹œì €ì¥</button>
                    <button type="submit" id="save-notice-btn" class="btn btn-primary">ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Schedule Modal -->
    <div id="schedule-modal" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div id="schedule-modal-backdrop" style="position: absolute; inset: 0; cursor: pointer;"></div>
        <div style="position: relative; z-index: 1001; background: white; border-radius: 0.5rem; padding: 2rem; max-width: 600px; max-height: 90vh; overflow-y: auto; margin: 1rem; width: 100%;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;" id="schedule-modal-title">ì¼ì • ì¶”ê°€</h2>
                <button id="close-schedule-modal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0; width: 2rem; height: 2rem; display: flex; align-items: center; justify-content: center;">&times;</button>
            </div>
            <form id="schedule-form">
                <div class="form-group">
                    <label for="schedule-course" class="form-label">ê³¼ì • *</label>
                    <select id="schedule-course" class="form-input" required>
                        <option value="">ê³¼ì •ì„ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                    <small style="color: var(--text-muted); font-size: 0.875rem; display: block; margin-top: 0.5rem;">ë“±ë¡ëœ ê°•ì˜ê³¼ì •ì„ ì„ íƒí•˜ì„¸ìš”.</small>
                </div>
                <div class="form-group">
                    <label for="schedule-date" class="form-label">ì‹œì‘ì¼ *</label>
                    <input type="date" id="schedule-date" class="form-input" required>
                    <small style="color: var(--text-muted); font-size: 0.875rem; display: block; margin-top: 0.5rem;">ê³¼ì •ì˜ ì‹œì‘ì¼ì„ ì„ íƒí•˜ì„¸ìš”. í•˜ë‚˜ì˜ ê³¼ì •ì— ì—¬ëŸ¬ ì‹œì‘ì¼ì„ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</small>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="schedule-active" checked>
                        <span>í™œì„±í™”</span>
                    </label>
                    <small style="color: var(--text-muted); font-size: 0.875rem; display: block; margin-top: 0.5rem;">í™œì„±í™”ëœ ì¼ì •ë§Œ í”„ë¡ íŠ¸ í˜ì´ì§€ì— í‘œì‹œë©ë‹ˆë‹¤.</small>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                    <button type="button" id="cancel-schedule-btn" class="btn btn-outline">ì·¨ì†Œ</button>
                    <button type="submit" id="save-schedule-btn" class="btn btn-primary">ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Instructor Schedule Modal -->
    <div id="instructor-schedule-modal" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div id="instructor-schedule-modal-backdrop" style="position: absolute; inset: 0; cursor: pointer;"></div>
        <div style="position: relative; z-index: 1001; background: white; border-radius: 0.5rem; padding: 2rem; max-width: 600px; max-height: 90vh; overflow-y: auto; margin: 1rem; width: 100%;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;" id="instructor-schedule-modal-title">í”„ë¡œê·¸ë¨ ì¼ì • ì¶”ê°€</h2>
                <button id="close-instructor-schedule-modal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0; width: 2rem; height: 2rem; display: flex; align-items: center; justify-content: center;">&times;</button>
            </div>
            <form id="instructor-schedule-form">
                <div class="form-group">
                    <label for="instructor-schedule-date" class="form-label">ì¼ì • *</label>
                    <input type="date" id="instructor-schedule-date" class="form-input" required>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="instructor-schedule-active">
                        <span>í™œì„±í™”</span>
                    </label>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                    <button type="button" id="cancel-instructor-schedule-btn" class="btn btn-outline">ì·¨ì†Œ</button>
                    <button type="submit" id="save-instructor-schedule-btn" class="btn btn-primary">ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Consult Schedule Modal -->
    <div id="consult-schedule-modal" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div id="consult-schedule-modal-backdrop" style="position: absolute; inset: 0; cursor: pointer;"></div>
        <div style="position: relative; z-index: 1001; background: white; border-radius: 0.5rem; padding: 2rem; max-width: 600px; max-height: 90vh; overflow-y: auto; margin: 1rem; width: 100%;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;" id="consult-schedule-modal-title">ìƒë‹´ ì¼ì • ì¶”ê°€</h2>
                <button id="close-consult-schedule-modal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0; width: 2rem; height: 2rem; display: flex; align-items: center; justify-content: center;">&times;</button>
            </div>
            <form id="consult-schedule-form">
                <div class="form-group">
                    <label for="consult-schedule-date" class="form-label">ì¼ì • *</label>
                    <input type="date" id="consult-schedule-date" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="consult-schedule-time" class="form-label">ì‹œê°„ *</label>
                    <select id="consult-schedule-time" class="form-input" required>
                        <option value="">ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="09:00">09:00</option>
                        <option value="10:00">10:00</option>
                        <option value="11:00">11:00</option>
                        <option value="12:00">12:00</option>
                        <option value="13:00">13:00</option>
                        <option value="14:00">14:00</option>
                        <option value="15:00">15:00</option>
                        <option value="16:00">16:00</option>
                        <option value="17:00">17:00</option>
                        <option value="18:00">18:00</option>
                        <option value="19:00">19:00</option>
                        <option value="20:00">20:00</option>
                    </select>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="consult-schedule-active">
                        <span>í™œì„±í™”</span>
                    </label>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                    <button type="button" id="cancel-consult-schedule-btn" class="btn btn-outline">ì·¨ì†Œ</button>
                    <button type="submit" id="save-consult-schedule-btn" class="btn btn-primary">ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Course Registration Modal -->
    <div id="course-modal" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div id="course-modal-backdrop" style="position: absolute; inset: 0; cursor: pointer;"></div>
        <div style="position: relative; z-index: 1001; background: white; border-radius: 0.5rem; padding: 2rem; max-width: 700px; max-height: 90vh; overflow-y: auto; margin: 1rem; width: 100%;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;" id="course-modal-title">ê³¼ì • ë“±ë¡</h2>
                <button id="close-course-modal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0; width: 2rem; height: 2rem; display: flex; align-items: center; justify-content: center;">&times;</button>
            </div>
            <form id="course-form">
                <div class="form-group">
                    <label for="course-slug" class="form-label">ê³¼ì • ìŠ¬ëŸ¬ê·¸ (URLìš©, ì„ íƒì‚¬í•­)</label>
                    <input type="text" id="course-slug" class="form-input" placeholder="ì˜ˆ: new-course-slug">
                    <small style="color: var(--text-muted); font-size: 0.875rem;">ìƒì„¸ í˜ì´ì§€ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ì…ë ¥í•˜ì„¸ìš”. ì˜ë¬¸ ì†Œë¬¸ì, í•˜ì´í”ˆ(-)ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¹„ì›Œë‘ë©´ ìƒì„¸ í˜ì´ì§€ ë§í¬ê°€ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.</small>
                </div>
                <div class="form-group">
                    <label for="course-title" class="form-label">ê³¼ì •ëª… *</label>
                    <input type="text" id="course-title" class="form-input" placeholder="ì˜ˆ: AI ë§ˆì¼€íŒ… ì‹¤ë¬´" required>
                </div>
                <div class="form-group">
                    <label for="course-category" class="form-label">ì¹´í…Œê³ ë¦¬ *</label>
                    <select id="course-category" class="form-input" required>
                        <option value="">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="ë§ˆì¼€íŒ…">ë§ˆì¼€íŒ…</option>
                        <option value="ê¸°íš">ê¸°íš</option>
                        <option value="ê°œë°œ">ê°œë°œ</option>
                        <option value="ë””ìì¸">ë””ìì¸</option>
                        <option value="ì˜ì—…ì‹¤ë¬´">ì˜ì—…ì‹¤ë¬´</option>
                        <option value="ì¸ì‚¬í–‰ì •">ì¸ì‚¬í–‰ì •</option>
                        <option value="ì·¨ì—…íŠ¹ê°•">ì·¨ì—…íŠ¹ê°•</option>
                        <option value="ì·¨ì—…">ì·¨ì—…</option>
                        <option value="ì‹¤ë¬´ ì—­ëŸ‰">ì‹¤ë¬´ ì—­ëŸ‰</option>
                        <option value="ìŠ¤íƒ€íŠ¸ì—…">ìŠ¤íƒ€íŠ¸ì—…</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="course-short-description" class="form-label">ì§§ì€ ì„¤ëª… *</label>
                    <textarea id="course-short-description" class="form-input" rows="3" placeholder="ê³¼ì •ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                </div>
                <div class="form-group">
                    <label for="course-duration" class="form-label">ê¸°ê°„ *</label>
                    <input type="text" id="course-duration" class="form-input" placeholder="ì˜ˆ: 6ì£¼, 5ì£¼, 6ì‹œê°„" required>
                </div>
                <div class="form-group">
                    <label for="course-format" class="form-label">í˜•ì‹ *</label>
                    <input type="text" id="course-format" class="form-input" placeholder="ì˜ˆ: ì˜¨ë¼ì¸ ì‹¤ì‹œê°„ + ê³¼ì œ" required>
                </div>
                <div class="form-group">
                    <label for="course-tools" class="form-label">ì‚¬ìš© ë„êµ¬ (ì‰¼í‘œë¡œ êµ¬ë¶„) *</label>
                    <input type="text" id="course-tools" class="form-input" placeholder="ì˜ˆ: ChatGPT, Claude, GA4, Make.com" required>
                    <small style="color: var(--text-muted); font-size: 0.875rem;">ì—¬ëŸ¬ ë„êµ¬ëŠ” ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš”.</small>
                </div>
                
                <hr style="margin: 2rem 0; border: none; border-top: 2px solid var(--border);">
                
                <!-- ìƒì„¸ í˜ì´ì§€ ì •ë³´ ì„¹ì…˜ -->
                <div style="background: #f9fafb; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
                    <h3 style="margin: 0 0 1rem 0; color: var(--primary); font-size: 1.25rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.5rem;">ğŸ“‹</span>
                        ìƒì„¸ í˜ì´ì§€ ì •ë³´ (ì„ íƒì‚¬í•­)
                    </h3>
                    <p style="margin: 0; color: var(--text-muted); font-size: 0.875rem;">ì•„ë˜ ì •ë³´ëŠ” ê³¼ì • ìƒì„¸ í˜ì´ì§€ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>
                
                <!-- ê³¼ì • ê°œìš” ì„¹ì…˜ -->
                <div style="background: #ffffff; border: 1px solid var(--border); border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <h4 style="margin: 0 0 1rem 0; color: #171717; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.25rem;">ğŸ“–</span>
                        ê³¼ì • ê°œìš”
                    </h4>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="course-full-description" class="form-label">ê³¼ì • ìƒì„¸ ì„¤ëª…</label>
                        <textarea id="course-full-description" class="form-input" rows="6" placeholder="ê³¼ì •ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”. ì´ ë‚´ìš©ì€ ìƒì„¸ í˜ì´ì§€ì˜ 'ê³¼ì • ê°œìš”' ì„¹ì…˜ê³¼ 'ì´ ê°•ì˜ì—ì„œ ë§Œë“œëŠ” ê²°ê³¼ë¬¼', 'í•µì‹¬ ê¸°ëŒ€ íš¨ê³¼' ì„¹ì…˜ì˜ ì„¤ëª…ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤."></textarea>
                        <small style="color: var(--text-muted); font-size: 0.875rem; display: block; margin-top: 0.5rem;">ê³¼ì •ì˜ ëª©í‘œ, íŠ¹ì§•, í•™ìŠµ ë‚´ìš© ë“±ì„ ìƒì„¸íˆ ì„¤ëª…í•´ì£¼ì„¸ìš”.</small>
                    </div>
                </div>
                
                <!-- ì»¤ë¦¬í˜ëŸ¼ ì„¹ì…˜ -->
                <div style="background: #ffffff; border: 1px solid var(--border); border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <h4 style="margin: 0 0 1rem 0; color: #171717; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.25rem;">ğŸ“š</span>
                        ì»¤ë¦¬í˜ëŸ¼
                    </h4>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="course-curriculum" class="form-label">ì»¤ë¦¬í˜ëŸ¼ (ì¼ë°˜ í…ìŠ¤íŠ¸)</label>
                        <textarea id="course-curriculum" class="form-input" rows="10" placeholder='ì˜ˆ: 1ì£¼ì°¨: ê¸°ì´ˆ&#10;- í•­ëª©1&#10;- í•­ëª©2&#10;&#10;2ì£¼ì°¨: ì‹¬í™”&#10;- í•­ëª©3&#10;- í•­ëª©4'></textarea>
                        <small style="color: var(--text-muted); font-size: 0.875rem; display: block; margin-top: 0.5rem;">
                            â€¢ ê° ì£¼ì°¨/ì°¨ì‹œëŠ” ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„í•˜ì„¸ìš”<br>
                            â€¢ í•­ëª©ì€ "- "ë¡œ ì‹œì‘í•˜ì„¸ìš”<br>
                            â€¢ ì£¼ì°¨ ì œëª©ì€ "1ì£¼ì°¨: ì œëª©", "Session 1: ì œëª©", "Part 1: ì œëª©" í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”
                        </small>
                    </div>
                </div>
                
                <!-- ê²°ê³¼ë¬¼ ì„¹ì…˜ -->
                <div style="background: #ffffff; border: 1px solid var(--border); border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <h4 style="margin: 0 0 1rem 0; color: #171717; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.25rem;">ğŸ¯</span>
                        ì´ ê°•ì˜ì—ì„œ ë§Œë“œëŠ” ê²°ê³¼ë¬¼
                    </h4>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="course-deliverables" class="form-label">ê²°ê³¼ë¬¼ ëª©ë¡</label>
                        <input type="text" id="course-deliverables" class="form-input" placeholder="ì˜ˆ: ë§ˆì¼€íŒ… ì „ëµì„œ, ì½˜í…ì¸  ìº˜ë¦°ë”, ëŒ€ì‹œë³´ë“œ, ìë™í™” ì‹œìŠ¤í…œ">
                        <small style="color: var(--text-muted); font-size: 0.875rem; display: block; margin-top: 0.5rem;">
                            ì´ ê°•ì˜ì—ì„œ ë§Œë“œëŠ” ê²°ê³¼ë¬¼ì„ ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš”. ê° ê²°ê³¼ë¬¼ì€ ìƒì„¸ í˜ì´ì§€ì˜ 'ì´ ê°•ì˜ì—ì„œ ë§Œë“œëŠ” ê²°ê³¼ë¬¼' ì„¹ì…˜ì— ì¹´ë“œë¡œ í‘œì‹œë©ë‹ˆë‹¤.
                        </small>
                    </div>
                </div>
                
                <!-- ê¸°ëŒ€ íš¨ê³¼ ì„¹ì…˜ -->
                <div style="background: #ffffff; border: 1px solid var(--border); border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <h4 style="margin: 0 0 1rem 0; color: #171717; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.25rem;">âœ¨</span>
                        í•µì‹¬ ê¸°ëŒ€ íš¨ê³¼
                    </h4>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="course-outcomes" class="form-label">ê¸°ëŒ€ íš¨ê³¼ ëª©ë¡</label>
                        <textarea id="course-outcomes" class="form-input" rows="5" placeholder="ì˜ˆ: ì‹¤ë¬´ ì—­ëŸ‰ ê°•í™”&#10;ìƒì‚°ì„± í–¥ìƒ&#10;AI ë„êµ¬ í™œìš© ëŠ¥ë ¥&#10;ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì • ì—­ëŸ‰"></textarea>
                        <small style="color: var(--text-muted); font-size: 0.875rem; display: block; margin-top: 0.5rem;">
                            ì´ ê°•ì˜ë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆëŠ” ë³€í™”ë¥¼ ê° ì¤„ì— í•˜ë‚˜ì”© ì…ë ¥í•˜ì„¸ìš”. ê° íš¨ê³¼ëŠ” ìƒì„¸ í˜ì´ì§€ì˜ 'í•µì‹¬ ê¸°ëŒ€ íš¨ê³¼' ì„¹ì…˜ì— ì¹´ë“œë¡œ í‘œì‹œë©ë‹ˆë‹¤.
                        </small>
                    </div>
                </div>
                
                <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                    <button type="button" id="cancel-course-btn" class="btn btn-outline">ì·¨ì†Œ</button>
                    <button type="submit" id="save-course-btn" class="btn btn-primary">ë“±ë¡</button>
                </div>
            </form>
        </div>
    </div>

    <!-- íšŒì› ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="user-edit-modal" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div id="user-edit-modal-backdrop" style="position: absolute; inset: 0; cursor: pointer;"></div>
        <div style="position: relative; z-index: 1001; background: white; border-radius: 0.5rem; padding: 2rem; max-width: 600px; max-height: 90vh; overflow-y: auto; margin: 1rem; width: 100%;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;" id="user-edit-modal-title">íšŒì› ì •ë³´ ìˆ˜ì •</h2>
                <button id="close-user-edit-modal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0; width: 2rem; height: 2rem; display: flex; align-items: center; justify-content: center;">&times;</button>
            </div>
            <form id="user-edit-form">
                <input type="hidden" id="user-edit-id" value="">
                <div class="form-group">
                    <label for="user-edit-name" class="form-label">ì´ë¦„ *</label>
                    <input type="text" id="user-edit-name" class="form-input" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                <div class="form-group">
                    <label for="user-edit-email" class="form-label">ì´ë©”ì¼ *</label>
                    <input type="email" id="user-edit-email" class="form-input" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                <div class="form-group">
                    <label for="user-edit-phone" class="form-label">ì „í™”ë²ˆí˜¸</label>
                    <input type="tel" id="user-edit-phone" class="form-input" placeholder="ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì„ íƒì‚¬í•­)">
                </div>
                <div class="form-group">
                    <label for="user-edit-status" class="form-label">ìŠ¹ì¸ ìƒíƒœ</label>
                    <select id="user-edit-status" class="form-input">
                        <option value="pending">ëŒ€ê¸° ì¤‘</option>
                        <option value="approved">ìŠ¹ì¸ë¨</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="user-edit-auth-method" class="form-label">ê°€ì… ë°©ë²•</label>
                    <select id="user-edit-auth-method" class="form-input">
                        <option value="normal">ì¼ë°˜</option>
                        <option value="social">ì†Œì…œ</option>
                    </select>
                </div>
                <div class="form-group" id="user-edit-auth-provider-group" style="display: none;">
                    <label for="user-edit-auth-provider" class="form-label">ì†Œì…œ ì œê³µì</label>
                    <select id="user-edit-auth-provider" class="form-input">
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="google">Google</option>
                        <option value="naver">Naver</option>
                        <option value="kakao">Kakao</option>
                        <option value="apple">Apple</option>
                    </select>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                    <button type="button" id="cancel-user-edit-btn" class="btn btn-outline">ì·¨ì†Œ</button>
                    <button type="submit" id="save-user-edit-btn" class="btn btn-primary">ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Courses Data -->
    <script src="../js/courses-data.js"></script>
    <!-- SheetJS ë¼ì´ë¸ŒëŸ¬ë¦¬ (ì—‘ì…€ íŒŒì¼ ìƒì„±ìš©) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script>
        // Prevent components.js from loading header in admin page
        $(document).ready(function() {
            // Remove any header-container that might be created
            $('#header-container').remove();
            
            // Check for resource loading errors
            window.addEventListener('error', function(e) {
                if (e.target.tagName === 'LINK' || e.target.tagName === 'SCRIPT' || e.target.tagName === 'IMG') {
                    console.error('Resource loading error:', e.target.src || e.target.href, e.message);
                    // Try to fix image path if it's the logo
                    if (e.target.tagName === 'IMG' && e.target.src.includes('logo')) {
                        // Try alternative path
                        const img = e.target;
                        const originalSrc = img.getAttribute('data-original-src') || img.src;
                        if (!img.getAttribute('data-retried')) {
                            img.setAttribute('data-retried', 'true');
                            // Try URL encoded version
                            const encodedSrc = originalSrc.replace(/[ê°€-í£]/g, function(match) {
                                return encodeURIComponent(match);
                            });
                            img.src = encodedSrc;
                        } else {
                            // Hide image if retry also failed
                            img.style.display = 'none';
                        }
                    }
                }
            }, true);
        });
    </script>
    <script>
        // Admin credentials (in production, this should be server-side)
        const ADMIN_CREDENTIALS = {
            username: 'admin',
            password: 'admin1234'
        };

        let currentApplicationId = null;
        let currentNoticeId = null;
        let applications = [];
        let users = [];
        let inquiries = [];
        let notices = [];
        let loginHistory = [];
        let courses = [];
        let schedules = [];
        let instructorProgram = null;
        let instructorSchedules = [];
        let consultSchedules = [];
        let currentScheduleId = null;
        let currentInstructorScheduleId = null;
        let currentConsultScheduleId = null;

        // Check if already logged in
        $(document).ready(function() {
            // ì´ˆê¸° ìƒíƒœ ì„¤ì • - ë¡œê·¸ì¸ í™”ë©´ í‘œì‹œ
            $('#login-screen').show();
            $('#admin-dashboard').hide();
            
            const isLoggedIn = sessionStorage.getItem('adminLoggedIn') === 'true';
            if (isLoggedIn) {
                showDashboard();
            } else {
                showLogin();
            }

            // Login form handler
            $('#login-form').on('submit', function(e) {
                e.preventDefault();
                const username = $('#admin-username').val();
                const password = $('#admin-password').val();

                if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                    sessionStorage.setItem('adminLoggedIn', 'true');
                    showDashboard();
                } else {
                    alert('ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                }
            });

            // Logout handler
            $('#logout-btn').on('click', function() {
                sessionStorage.removeItem('adminLoggedIn');
                showLogin();
            });

            // Refresh handler
            $('#refresh-btn').on('click', function() {
                loadApplications();
                loadUsers();
                loadInquiries();
                loadNotices();
                loadLoginHistory();
                alert('ë°ì´í„°ë¥¼ ìƒˆë¡œê³ ì¹¨í–ˆìŠµë‹ˆë‹¤.');
            });
            
            // Export handlers
            $('#export-applications-btn').on('click', function() {
                // í•„í„°ë§ëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const typeFilter = $('#type-filter').val();
                const searchTerm = $('#search-input').val().toLowerCase();
                
                let filtered = applications;
                if (typeFilter) {
                    filtered = filtered.filter(a => a.applicationType === typeFilter);
                }
                if (searchTerm) {
                    filtered = filtered.filter(a => 
                        a.name.toLowerCase().includes(searchTerm) ||
                        a.email.toLowerCase().includes(searchTerm) ||
                        (a.phone && a.phone.includes(searchTerm))
                    );
                }
                exportToExcel(filtered, 'applications');
            });
            
            $('#export-users-btn').on('click', function() {
                // í•„í„°ë§ëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const searchTerm = $('#user-search-input').val().toLowerCase();
                let filtered = users;
                if (searchTerm) {
                    filtered = filtered.filter(u => 
                        u.email.toLowerCase().includes(searchTerm)
                    );
                }
                exportToExcel(filtered, 'users');
            });

            $('#export-inquiries-btn').on('click', function() {
                // í•„í„°ë§ëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const searchTerm = $('#inquiry-search-input').val().toLowerCase();
                let filtered = inquiries;
                if (searchTerm) {
                    filtered = filtered.filter(i => 
                        (i.title && i.title.toLowerCase().includes(searchTerm)) ||
                        (i.content && i.content.toLowerCase().includes(searchTerm)) ||
                        (i.author && i.author.toLowerCase().includes(searchTerm)) ||
                        (i.authorEmail && i.authorEmail.toLowerCase().includes(searchTerm))
                    );
                }
                exportToExcel(filtered, 'inquiries');
            });

            $('#export-login-history-btn').on('click', function() {
                // í•„í„°ë§ëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const searchTerm = $('#login-search-input').val().toLowerCase();
                const dateFrom = $('#login-date-from').val();
                const dateTo = $('#login-date-to').val();
                
                let filtered = loginHistory;
                
                if (searchTerm) {
                    filtered = filtered.filter(h => 
                        (h.userEmail && h.userEmail.toLowerCase().includes(searchTerm)) ||
                        (h.userName && h.userName.toLowerCase().includes(searchTerm))
                    );
                }
                
                if (dateFrom) {
                    const fromDate = new Date(dateFrom);
                    fromDate.setHours(0, 0, 0, 0);
                    filtered = filtered.filter(h => {
                        const loginDate = new Date(h.loginAt);
                        loginDate.setHours(0, 0, 0, 0);
                        return loginDate >= fromDate;
                    });
                }
                
                if (dateTo) {
                    const toDate = new Date(dateTo);
                    toDate.setHours(23, 59, 59, 999);
                    filtered = filtered.filter(h => {
                        const loginDate = new Date(h.loginAt);
                        return loginDate <= toDate;
                    });
                }
                
                exportToExcel(filtered, 'login-history');
            });

            // Tab handlers
            $('.admin-tab').on('click', function() {
                const tab = $(this).data('tab');
                switchTab(tab);
            });

            // Filter handlers
            $('#type-filter, #status-filter').on('change', filterApplications);
            $('#search-input').on('input', filterApplications);
            $('#user-search-input').on('input', filterUsers);
            
            // Users refresh button
            $('#refresh-users-btn').on('click', function() {
                console.log('ğŸ”„ [íšŒì›ê´€ë¦¬] ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í´ë¦­');
                loadUsers();
            });

            // ì´ë²¤íŠ¸ ìœ„ì„ì„ ì‚¬ìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ ìƒì„±ëœ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë°”ì¸ë”©
            $(document).on('click', '[data-action="approve-user"]', function(e) {
                e.preventDefault();
                e.stopPropagation();
                // attr()ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ìì—´ë¡œ í™•ì‹¤íˆ ê°€ì ¸ì˜¤ê¸°
                const id = $(this).attr('data-id') || $(this).data('id');
                console.log('âœ… [Event] Approve user button clicked');
                console.log('âœ… [Event] ID from attr:', $(this).attr('data-id'));
                console.log('âœ… [Event] ID from data():', $(this).data('id'));
                console.log('âœ… [Event] Final ID:', id, 'type:', typeof id);
                if (!id) {
                    alert('íšŒì› IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    console.error('âŒ [Event] No ID found on approve button');
                    return;
                }
                if (confirm('ì´ íšŒì›ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    approveUser(id);
                }
            });

            $(document).on('click', '[data-action="delete-user"]', function(e) {
                e.preventDefault();
                e.stopPropagation();
                // attr()ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ìì—´ë¡œ í™•ì‹¤íˆ ê°€ì ¸ì˜¤ê¸° (data()ëŠ” íƒ€ì… ë³€í™˜ì„ í•  ìˆ˜ ìˆìŒ)
                const id = $(this).attr('data-id') || $(this).data('id');
                console.log('âœ… [Event] Delete user button clicked');
                console.log('âœ… [Event] ID from attr:', $(this).attr('data-id'));
                console.log('âœ… [Event] ID from data():', $(this).data('id'));
                console.log('âœ… [Event] Final ID:', id, 'type:', typeof id);
                if (!id) {
                    alert('íšŒì› IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    console.error('âŒ [Event] No ID found on delete button');
                    return;
                }
                if (confirm('ì •ë§ë¡œ ì´ íšŒì›ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    deleteUser(id);
                }
            });

            $(document).on('click', '[data-action="edit-user"]', function(e) {
                e.preventDefault();
                e.stopPropagation();
                // attr()ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ìì—´ë¡œ í™•ì‹¤íˆ ê°€ì ¸ì˜¤ê¸°
                const id = $(this).attr('data-id') || $(this).data('id');
                console.log('âœ… [Event] Edit user button clicked');
                console.log('âœ… [Event] ID from attr:', $(this).attr('data-id'));
                console.log('âœ… [Event] ID from data():', $(this).data('id'));
                console.log('âœ… [Event] Final ID:', id, 'type:', typeof id);
                if (!id) {
                    alert('íšŒì› IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    console.error('âŒ [Event] No ID found on edit button');
                    return;
                }
                openUserEditModal(id);
            });
            $('#inquiry-search-input').on('input', filterInquiries);
            $('#login-search-input').on('input', filterLoginHistory);
            $('#login-date-from, #login-date-to').on('change', filterLoginHistory);

            // Login history selection mode handlers
            $('input[name="selection-mode"]').on('change', function() {
                updateSelectionMode();
            });

            // Login history selection handlers
            $(document).on('click', '#select-all-logins-btn', function() {
                $('.login-history-checkbox:visible').prop('checked', true);
                updateSelectAllCheckbox();
            });

            $(document).on('click', '#deselect-all-logins-btn', function() {
                $('.login-history-checkbox:visible').prop('checked', false);
                $('#select-all-logins-checkbox').prop('checked', false);
            });

            $(document).on('change', '#select-all-logins-checkbox', function() {
                const isChecked = $(this).is(':checked');
                $('.login-history-checkbox:visible').prop('checked', isChecked);
            });

            $(document).on('change', '.login-history-checkbox', function() {
                updateSelectAllCheckbox();
            });

            // Delete selected logins
            $(document).on('click', '#delete-selected-logins-btn', function() {
                const selectedIds = $('.login-history-checkbox:checked').map(function() {
                    return $(this).data('id');
                }).get();

                if (selectedIds.length === 0) {
                    alert('ì‚­ì œí•  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (confirm(`ì„ íƒí•œ ${selectedIds.length}ê°œì˜ ë¡œê·¸ì¸ ì´ë ¥ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    deleteSelectedLoginHistory(selectedIds);
                }
            });

            // Delete period logins
            $(document).on('click', '#delete-period-logins-btn', function() {
                const dateFrom = $('#login-date-from').val();
                const dateTo = $('#login-date-to').val();

                if (!dateFrom || !dateTo) {
                    alert('ì‚­ì œí•  ê¸°ê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”. (ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ ëª¨ë‘ í•„ìš”)');
                    return;
                }

                const fromDate = new Date(dateFrom);
                fromDate.setHours(0, 0, 0, 0);
                const toDate = new Date(dateTo);
                toDate.setHours(23, 59, 59, 999);

                const periodRecords = loginHistory.filter(h => {
                    const loginDate = new Date(h.loginAt);
                    return loginDate >= fromDate && loginDate <= toDate;
                });

                if (periodRecords.length === 0) {
                    alert('ì„ íƒí•œ ê¸°ê°„ì— í•´ë‹¹í•˜ëŠ” ë¡œê·¸ì¸ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                if (confirm(`ì„ íƒí•œ ê¸°ê°„(${dateFrom} ~ ${dateTo})ì˜ ${periodRecords.length}ê°œ ë¡œê·¸ì¸ ì´ë ¥ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    const periodIds = periodRecords.map(r => r.id);
                    deleteSelectedLoginHistory(periodIds);
                }
            });

            // Modal handlers
            function closeModal() {
                $('#detail-modal').css('display', 'none');
                currentApplicationId = null;
            }
            
            $('#close-modal').on('click', function(e) {
                e.stopPropagation();
                closeModal();
            });
            
            $('#modal-backdrop').on('click', function() {
                closeModal();
            });
            
            // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
            $(document).on('keydown', function(e) {
                if (e.key === 'Escape' && $('#detail-modal').is(':visible')) {
                    closeModal();
                }
            });

            $('#approve-btn').on('click', function() {
                if (currentApplicationId) {
                    updateApplicationStatus(currentApplicationId, 'approved');
                }
            });

            $('#reject-btn').on('click', function() {
                if (currentApplicationId) {
                    updateApplicationStatus(currentApplicationId, 'rejected');
                }
            });

            // Notice handlers
            $('#create-notice-btn').on('click', function() {
                currentNoticeId = null;
                $('#notice-modal-title').text('ê³µì§€ì‚¬í•­ ì‘ì„±');
                $('#notice-form')[0].reset();
                $('#notice-published').prop('checked', true);
                $('#notice-modal').css('display', 'flex');
            });

            $('#close-notice-modal, #notice-modal-backdrop, #cancel-notice-btn').on('click', function() {
                $('#notice-modal').css('display', 'none');
                currentNoticeId = null;
            });

            $('#save-notice-draft-btn').on('click', function() {
                saveNotice(false);
            });

            $('#notice-form').on('submit', function(e) {
                e.preventDefault();
                const isPublished = $('#notice-published').is(':checked');
                saveNotice(isPublished);
            });

            $('#notice-search-input').on('input', filterNotices);

            // Load data on dashboard show
            if (isLoggedIn) {
                loadApplications();
                loadUsers();
                loadInquiries();
                loadNotices();
                loadLoginHistory();
            }
        });

        function switchTab(tab) {
            // Update tab buttons
            $('.admin-tab').removeClass('active').css({
                'border-bottom': 'none',
                'color': 'var(--text-muted)'
            });
            $(`.admin-tab[data-tab="${tab}"]`).addClass('active').css({
                'border-bottom': '2px solid var(--primary)',
                'color': 'var(--primary)'
            });

            // Show/hide sections and export buttons
            if (tab === 'applications') {
                $('#applications-section').show();
                $('#users-section').hide();
                $('#inquiries-section').hide();
                $('#notices-section').hide();
                $('#login-history-section').hide();
                $('#courses-section').hide();
                $('#schedules-section').hide();
                $('#instructor-program-section').hide();
                $('#workshop-applications-section').hide();
                $('#export-applications-btn').show();
                $('#export-users-btn').hide();
                $('#export-inquiries-btn').hide();
                $('#export-login-history-btn').hide();
            } else if (tab === 'users') {
                $('#applications-section').hide();
                $('#users-section').show();
                $('#inquiries-section').hide();
                $('#notices-section').hide();
                $('#login-history-section').hide();
                $('#courses-section').hide();
                $('#schedules-section').hide();
                $('#instructor-program-section').hide();
                $('#workshop-applications-section').hide();
                $('#export-applications-btn').hide();
                $('#export-users-btn').show();
                $('#export-inquiries-btn').hide();
                $('#export-login-history-btn').hide();
                loadUsers();
            } else if (tab === 'inquiries') {
                $('#applications-section').hide();
                $('#users-section').hide();
                $('#inquiries-section').show();
                $('#notices-section').hide();
                $('#login-history-section').hide();
                $('#courses-section').hide();
                $('#schedules-section').hide();
                $('#instructor-program-section').hide();
                $('#workshop-applications-section').hide();
                $('#export-applications-btn').hide();
                $('#export-users-btn').hide();
                $('#export-inquiries-btn').show();
                $('#export-login-history-btn').hide();
                loadInquiries();
            } else if (tab === 'notices') {
                $('#applications-section').hide();
                $('#users-section').hide();
                $('#inquiries-section').hide();
                $('#notices-section').show();
                $('#login-history-section').hide();
                $('#courses-section').hide();
                $('#schedules-section').hide();
                $('#instructor-program-section').hide();
                $('#workshop-applications-section').hide();
                $('#export-applications-btn').hide();
                $('#export-users-btn').hide();
                $('#export-inquiries-btn').hide();
                $('#export-login-history-btn').hide();
                loadNotices();
            } else if (tab === 'login-history') {
                $('#applications-section').hide();
                $('#users-section').hide();
                $('#inquiries-section').hide();
                $('#notices-section').hide();
                $('#login-history-section').show();
                $('#courses-section').hide();
                $('#schedules-section').hide();
                $('#instructor-program-section').hide();
                $('#workshop-applications-section').hide();
                $('#export-applications-btn').hide();
                $('#export-users-btn').hide();
                $('#export-inquiries-btn').hide();
                $('#export-login-history-btn').show();
                loadLoginHistory();
            } else if (tab === 'courses') {
                $('#applications-section').hide();
                $('#users-section').hide();
                $('#inquiries-section').hide();
                $('#notices-section').hide();
                $('#login-history-section').hide();
                $('#courses-section').show();
                $('#schedules-section').hide();
                $('#instructor-program-section').hide();
                $('#workshop-applications-section').hide();
                $('#export-applications-btn').hide();
                $('#export-users-btn').hide();
                $('#export-inquiries-btn').hide();
                $('#export-login-history-btn').hide();
                loadCourses();
            } else if (tab === 'schedules') {
                $('#applications-section').hide();
                $('#users-section').hide();
                $('#inquiries-section').hide();
                $('#notices-section').hide();
                $('#login-history-section').hide();
                $('#courses-section').hide();
                $('#schedules-section').show();
                $('#instructor-program-section').hide();
                $('#workshop-applications-section').hide();
                $('#export-applications-btn').hide();
                $('#export-users-btn').hide();
                $('#export-inquiries-btn').hide();
                $('#export-login-history-btn').hide();
                loadSchedules();
            } else if (tab === 'instructor-program') {
                $('#applications-section').hide();
                $('#users-section').hide();
                $('#inquiries-section').hide();
                $('#notices-section').hide();
                $('#login-history-section').hide();
                $('#courses-section').hide();
                $('#schedules-section').hide();
                $('#instructor-program-section').show();
                $('#workshop-applications-section').hide();
                $('#export-applications-btn').hide();
                $('#export-users-btn').hide();
                $('#export-inquiries-btn').hide();
                $('#export-login-history-btn').hide();
                loadInstructorProgram();
            } else if (tab === 'workshop-applications') {
                $('#applications-section').hide();
                $('#users-section').hide();
                $('#inquiries-section').hide();
                $('#notices-section').hide();
                $('#login-history-section').hide();
                $('#courses-section').hide();
                $('#schedules-section').hide();
                $('#instructor-program-section').hide();
                $('#workshop-applications-section').show();
                $('#export-applications-btn').hide();
                $('#export-users-btn').hide();
                $('#export-inquiries-btn').hide();
                $('#export-login-history-btn').hide();
                loadWorkshopApplications();
            }
        }

        function showLogin() {
            $('#login-screen').show();
            $('#admin-dashboard').hide();
            $('#admin-username').val('');
            $('#admin-password').val('');
        }

        function showDashboard() {
            $('#login-screen').hide();
            $('#admin-dashboard').show();
            loadApplications();
            loadUsers();
            loadInquiries();
            loadNotices();
            loadLoginHistory();
        }

        function loadUsers() {
            try {
                const stored = localStorage.getItem('users');
                console.log('ğŸ” [loadUsers] localStorage users:', stored ? 'exists' : 'not found');
                
                if (stored) {
                    const parsed = JSON.parse(stored);
                    console.log('ğŸ” [loadUsers] Parsed users count:', Array.isArray(parsed) ? parsed.length : 'not an array');
                    console.log('ğŸ” [loadUsers] Raw users data:', parsed);
                    
                    // ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ - ë” ê´€ëŒ€í•œ ì¡°ê±´
                    if (!Array.isArray(parsed)) {
                        console.error('âŒ [loadUsers] users is not an array:', typeof parsed, parsed);
                        users = [];
                    } else {
                        users = parsed.filter(u => {
                            // emailë§Œ í•„ìˆ˜, ë‚˜ë¨¸ì§€ëŠ” ì„ íƒ
                            const isValid = u && u.email;
                            if (!isValid) {
                                console.warn('âš ï¸ [loadUsers] Invalid user filtered out:', u);
                            }
                            return isValid;
                        });
                    }
                    
                    console.log('ğŸ” [loadUsers] Valid users after filter:', users.length);
                    
                    // registeredAtì´ ì—†ëŠ” ê²½ìš° idë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±
                    users = users.map(u => {
                        if (!u.registeredAt && u.id) {
                            // idê°€ timestamp ê¸°ë°˜ì´ë©´ ë‚ ì§œë¡œ ë³€í™˜
                            const timestamp = parseInt(u.id);
                            if (!isNaN(timestamp) && timestamp > 1000000000000) {
                                u.registeredAt = new Date(timestamp).toISOString();
                            } else {
                                u.registeredAt = new Date().toISOString();
                            }
                        } else if (!u.registeredAt) {
                            // idë„ ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°„ ì‚¬ìš©
                            u.registeredAt = new Date().toISOString();
                        }
                        return u;
                    });
                    
                    // Sort by date (newest first)
                    users.sort((a, b) => {
                        const dateA = a.registeredAt ? new Date(a.registeredAt) : new Date(0);
                        const dateB = b.registeredAt ? new Date(b.registeredAt) : new Date(0);
                        return dateB - dateA;
                    });
                    
                    console.log('âœ… [loadUsers] Final users array:', users);
                    console.log('âœ… [loadUsers] Users with email irum.ceo@gmail.com:', users.filter(u => u.email === 'irum.ceo@gmail.com'));
                } else {
                    users = [];
                    console.warn('âš ï¸ [loadUsers] No users found in localStorage');
                }
                console.log('âœ… [loadUsers] Total loaded users:', users.length);
                updateUserStatistics();
                filterUsers();
            } catch (e) {
                console.error('âŒ [loadUsers] Error loading users:', e);
                console.error('âŒ [loadUsers] Error stack:', e.stack);
                users = [];
                updateUserStatistics();
                filterUsers();
            }
        }

        function updateUserStatistics() {
            const total = users.length;
            // ìŠ¹ì¸ëœ íšŒì›ë§Œ í™œì„±ìœ¼ë¡œ ê³„ì‚°
            const active = users.filter(u => u.approved === true || u.status === 'approved').length;

            $('#total-users').text(total);
            $('#active-users').text(active);
        }

        // íšŒì› ìŠ¹ì¸ í•¨ìˆ˜
        function approveUser(id) {
            console.log('âœ… [approveUser] Called with id:', id, 'type:', typeof id);
            
            // ID ìœ íš¨ì„± ê²€ì‚¬
            if (!id || id === '' || id === 'undefined' || id === 'null') {
                console.error('âŒ [approveUser] Invalid ID:', id);
                alert('íšŒì› IDê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
            
            try {
                // localStorageì—ì„œ ì§ì ‘ ì½ì–´ì™€ì„œ ìŠ¹ì¸
                const stored = localStorage.getItem('users');
                if (!stored) {
                    alert('íšŒì› ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                let userList = JSON.parse(stored);
                console.log('âœ… [approveUser] Current users in localStorage:', userList.length);
                console.log('âœ… [approveUser] Searching for ID:', id, 'type:', typeof id);
                console.log('âœ… [approveUser] All user IDs:', userList.map(u => ({ id: u ? u.id : 'null', type: typeof (u ? u.id : null) })));
                
                // IDë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ë¹„êµ (ë” ìœ ì—°í•œ ë¹„êµ)
                const userIndex = userList.findIndex(u => {
                    if (!u || !u.id) {
                        return false;
                    }
                    // ì—¬ëŸ¬ ë°©ì‹ìœ¼ë¡œ ë¹„êµ ì‹œë„
                    const idStr = String(id).trim();
                    const userIdStr = String(u.id).trim();
                    const matches = idStr === userIdStr || 
                                   String(id) === String(u.id) ||
                                   Number(id) === Number(u.id) && !isNaN(Number(id)) && !isNaN(Number(u.id));
                    if (matches) {
                        console.log('âœ… [approveUser] Found user:', u);
                        console.log('âœ… [approveUser] Match details:', {
                            searchId: idStr,
                            userId: userIdStr,
                            exactMatch: idStr === userIdStr
                        });
                    }
                    return matches;
                });
                console.log('âœ… [approveUser] Found index:', userIndex);
                
                if (userIndex === -1) {
                    console.error('âŒ [approveUser] User not found. Searching ID:', id);
                    console.error('âŒ [approveUser] Available users:', userList.map(u => ({
                        id: u ? u.id : 'null',
                        email: u ? u.email : 'null',
                        name: u ? u.name : 'null'
                    })));
                    alert('íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: ' + id + '\n\nì½˜ì†”ì„ í™•ì¸í•˜ì—¬ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                    return;
                }

                // íšŒì› ìŠ¹ì¸ ì²˜ë¦¬
                userList[userIndex].approved = true;
                userList[userIndex].status = 'approved';
                console.log('âœ… [approveUser] User approved:', userList[userIndex]);
                
                // localStorageì— ì €ì¥
                localStorage.setItem('users', JSON.stringify(userList));
                console.log('âœ… [approveUser] Saved to localStorage');
                
                // ì „ì—­ ë³€ìˆ˜ usersë„ ì§ì ‘ ì—…ë°ì´íŠ¸
                const globalUserIndex = users.findIndex(u => {
                    if (!u || !u.id) return false;
                    return String(u.id) === String(id);
                });
                if (globalUserIndex !== -1) {
                    users[globalUserIndex].approved = true;
                    users[globalUserIndex].status = 'approved';
                    console.log('âœ… [approveUser] Global users array updated');
                } else {
                    console.warn('âš ï¸ [approveUser] User not found in global users array');
                }
                
                // ë°ì´í„° ë‹¤ì‹œ ë¡œë“œí•˜ì—¬ í™”ë©´ ê°±ì‹  (ê°€ì¥ í™•ì‹¤í•œ ë°©ë²•)
                loadUsers();
                
                alert('íšŒì›ì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('âŒ [approveUser] Error:', e);
                console.error('âŒ [approveUser] Error stack:', e.stack);
                alert('ìŠ¹ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
            }
        }

        function filterUsers() {
            const searchTerm = $('#user-search-input').val().toLowerCase();
            console.log('ğŸ” [filterUsers] Search term:', searchTerm);
            console.log('ğŸ” [filterUsers] Total users before filter:', users.length);

            let filtered = users;

            if (searchTerm) {
                filtered = filtered.filter(u => {
                    const matches = u.email.toLowerCase().includes(searchTerm) ||
                                   (u.name && u.name.toLowerCase().includes(searchTerm)) ||
                                   (u.phone && u.phone.includes(searchTerm));
                    return matches;
                });
            }

            console.log('ğŸ” [filterUsers] Filtered users count:', filtered.length);
            console.log('ğŸ” [filterUsers] Filtered users:', filtered);
            renderUsers(filtered);
        }

        function renderUsers(userList) {
            const tbody = $('#users-tbody');
            tbody.empty();

            if (userList.length === 0) {
                tbody.html('<tr><td colspan="7" class="no-applications">íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            userList.forEach(user => {
                // registeredAtì´ ì—†ìœ¼ë©´ idë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‚ ì§œ ìƒì„±
                let registeredDate = user.registeredAt;
                if (!registeredDate && user.id) {
                    const timestamp = parseInt(user.id);
                    if (!isNaN(timestamp) && timestamp > 1000000000000) {
                        registeredDate = new Date(timestamp).toISOString();
                    } else {
                        registeredDate = new Date().toISOString();
                    }
                } else if (!registeredDate) {
                    registeredDate = new Date().toISOString();
                }
                
                const date = new Date(registeredDate);
                const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                               date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                
                // ìŠ¹ì¸ ìƒíƒœ í™•ì¸ (approved í•„ë“œ ë˜ëŠ” status í•„ë“œ)
                const isApproved = user.approved === true || user.status === 'approved';
                const statusClass = isApproved ? 'status-approved' : 'status-pending';
                const statusText = isApproved ? 'ìŠ¹ì¸ë¨' : 'ëŒ€ê¸° ì¤‘';
                
                // ê°€ì… ë°©ë²• í‘œì‹œ
                let authMethod = 'ì¼ë°˜';
                if (user.authMethod === 'social' && user.authProvider) {
                    const providerNames = {
                        'google': 'Google',
                        'naver': 'Naver',
                        'kakao': 'Kakao',
                        'apple': 'Apple'
                    };
                    authMethod = providerNames[user.authProvider] || user.authProvider || 'ì†Œì…œ';
                } else if (user.authMethod === 'social') {
                    authMethod = 'ì†Œì…œ';
                } else {
                    authMethod = 'ì¼ë°˜';
                }

                // user.id í™•ì¸ ë° ì²˜ë¦¬
                let userId = '';
                if (user.id) {
                    userId = String(user.id);
                } else {
                    // IDê°€ ì—†ìœ¼ë©´ ì„ì‹œ ID ìƒì„± (ì´ë¯¸ ë“±ë¡ëœ ì‚¬ìš©ìëŠ” idê°€ ìˆì–´ì•¼ í•¨)
                    console.warn('âš ï¸ [renderUsers] User without id found:', user);
                    // IDê°€ ì—†ì–´ë„ ë²„íŠ¼ì€ í‘œì‹œí•˜ë˜, ì´ë©”ì¼ì„ IDë¡œ ì‚¬ìš©
                    userId = user.email || 'unknown-' + Date.now();
                }
                
                console.log('ğŸ” [renderUsers] Rendering user:', {
                    id: userId,
                    email: user.email,
                    name: user.name,
                    isApproved: isApproved
                });
                
                const row = $(`
                    <tr>
                        <td>${dateStr}</td>
                        <td>${user.name || '-'}</td>
                        <td>${user.email || '-'}</td>
                        <td>${user.phone || '-'}</td>
                        <td>${authMethod}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            ${!isApproved ? `<button class="btn btn-sm btn-primary approve-user-btn" style="margin-right: 0.5rem;" data-id="${userId}" data-action="approve-user">ìŠ¹ì¸</button>` : ''}
                            <button class="btn btn-sm btn-outline edit-user-btn" style="margin-right: 0.5rem;" data-id="${userId}" data-action="edit-user">ìˆ˜ì •</button>
                            <button class="btn btn-sm delete-user-btn" style="background: #ef4444; color: white; border: none;" data-id="${userId}" data-action="delete-user">ì‚­ì œ</button>
                        </td>
                    </tr>
                `);

                // ì´ë²¤íŠ¸ ìœ„ì„ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ì´ë²¤íŠ¸ ë°”ì¸ë”© ë¶ˆí•„ìš”
                // ì´ë²¤íŠ¸ ìœ„ì„ì€ $(document).ready()ì—ì„œ ì²˜ë¦¬ë¨
                
                tbody.append(row);
            });
        }

        function loadApplications() {
            try {
                // Load regular applications
                const stored = localStorage.getItem('applications');
                let regularApps = [];
                if (stored) {
                    const parsed = JSON.parse(stored);
                    regularApps = Array.isArray(parsed) ? parsed.filter(a => {
                        return a && a.id && a.submittedAt && a.email;
                    }) : [];
                }
                
                // Load AI Workshop applications
                const aiwStored = localStorage.getItem('aiw-applications');
                let aiwApps = [];
                if (aiwStored) {
                    const aiwParsed = JSON.parse(aiwStored);
                    aiwApps = Array.isArray(aiwParsed) ? aiwParsed.map(a => {
                        // Convert AI Workshop format to standard application format
                        return {
                            id: a.id,
                            name: a.name,
                            email: '', // AI Workshop doesn't have email
                            phone: a.phone,
                            submittedAt: a.createdAt,
                            applicationType: 'aiw-workshop',
                            courseTitle: '2026 AI Instructor Workshop',
                            preferredSchedule: a.curriculumRequest ? 'ì»¤ë¦¬í˜ëŸ¼ ìš”ì²­ í¬í•¨' : '',
                            status: a.status || 'pending',
                            curriculumRequest: a.curriculumRequest || false
                        };
                    }).filter(a => a && a.id && a.submittedAt) : [];
                }
                
                // Combine and sort
                applications = [...regularApps, ...aiwApps];
                applications.sort((a, b) => new Date(b.submittedAt) - new Date(a.submittedAt));
                
                updateStatistics();
                filterApplications();
            } catch (e) {
                console.error('Error loading applications:', e);
                applications = [];
                updateStatistics();
                filterApplications();
            }
        }

        function updateStatistics() {
            const total = applications.length;
            const pending = applications.filter(a => a.status === 'pending').length;
            const approved = applications.filter(a => a.status === 'approved').length;
            const rejected = applications.filter(a => a.status === 'rejected').length;

            $('#total-count').text(total);
            $('#pending-count').text(pending);
            $('#approved-count').text(approved);
            $('#rejected-count').text(rejected);
        }

        function filterApplications() {
            const typeFilter = $('#type-filter').val();
            const searchTerm = $('#search-input').val().toLowerCase();

            let filtered = applications;

            if (typeFilter) {
                filtered = filtered.filter(a => a.applicationType === typeFilter);
            }

            if (searchTerm) {
                filtered = filtered.filter(a => 
                    a.name.toLowerCase().includes(searchTerm) ||
                    a.email.toLowerCase().includes(searchTerm) ||
                    (a.phone && a.phone.includes(searchTerm))
                );
            }

            renderApplications(filtered);
        }

        function renderApplications(apps) {
            const tbody = $('#applications-tbody');
            tbody.empty();

            if (apps.length === 0) {
                tbody.html('<tr><td colspan="7" class="no-applications">ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            apps.forEach(app => {
                const date = new Date(app.submittedAt);
                const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                               date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                
                const statusClass = `status-${app.status || 'pending'}`;
                const statusText = {
                    'pending': 'ëŒ€ê¸° ì¤‘',
                    'approved': 'ìŠ¹ì¸ë¨',
                    'rejected': 'ê±°ì ˆë¨'
                }[app.status || 'pending'] || 'ëŒ€ê¸° ì¤‘';

                const typeText = {
                    'student': 'ê°•ì˜ì‹ ì²­',
                    'instructor': 'ê°•ì‚¬ ì‹ ì²­',
                    'consult': 'ìƒë‹´ì‹ ì²­',
                    'aiw-workshop': 'AI Workshop ì„¤ëª…íšŒ'
                }[app.applicationType] || app.applicationType;

                const row = $(`
                    <tr>
                        <td>${dateStr}</td>
                        <td>${app.name}</td>
                        <td>${app.email}</td>
                        <td>${app.phone || '-'}</td>
                        <td>${app.courseTitle || typeText}</td>
                        <td>${app.preferredSchedule || app.preferredTime || '-'}</td>
                        <td>
                            <button class="btn btn-sm btn-outline view-detail" data-id="${app.id}" style="margin-right: 0.5rem;">ìƒì„¸ë³´ê¸°</button>
                            <button class="btn btn-sm delete-application-btn" style="background: #ef4444; color: white; border: none;" data-id="${app.id}" data-action="delete-application">ì‚­ì œ</button>
                        </td>
                    </tr>
                `);

                row.find('.view-detail').on('click', function() {
                    showApplicationDetail(app.id);
                });

                row.find('[data-action="delete-application"]').on('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const id = $(this).data('id');
                    console.log('Delete application button clicked, id:', id);
                    if (confirm('ì •ë§ë¡œ ì´ ì‹ ì²­ ë‚´ì—­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        deleteApplication(id);
                    }
                });

                tbody.append(row);
            });
        }

        function showApplicationDetail(id) {
            const app = applications.find(a => a.id === id);
            if (!app) return;

            currentApplicationId = id;
            
            // ìŠ¹ì¸/ê±°ì ˆ ë²„íŠ¼ í‘œì‹œ
            $('#approve-btn, #reject-btn').show();

            const date = new Date(app.submittedAt);
            const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                           date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });

            const detailHtml = `
                <div class="detail-row">
                    <div class="detail-label">ì‹ ì²­ì¼ì‹œ</div>
                    <div>${dateStr}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ì‹ ì²­ ìœ í˜•</div>
                    <div>${app.applicationType === 'aiw-workshop' ? '2026 AI Instructor Workshop ì„¤ëª…íšŒ' : (app.courseTitle || (app.applicationType === 'consult' ? 'Zoom ìƒë‹´ ì‹ ì²­' : app.applicationType === 'instructor' ? 'ê°•ì‚¬ ì„±ì¥ í”„ë¡œê·¸ë¨' : 'í•™ìƒ ì‹ ì²­'))}</div>
                </div>
                ${app.applicationType === 'aiw-workshop' && app.curriculumRequest ? `
                <div class="detail-row">
                    <div class="detail-label">ì»¤ë¦¬í˜ëŸ¼ ìš”ì²­</div>
                    <div>ì˜ˆ</div>
                </div>
                ` : ''}
                ${app.preferredSchedule || app.preferredTime ? `
                <div class="detail-row">
                    <div class="detail-label">í¬ë§ ì¼ì •</div>
                    <div>${app.preferredSchedule || ''} ${app.preferredTime || ''}</div>
                </div>
                ` : ''}
                <div class="detail-row">
                    <div class="detail-label">ì´ë¦„</div>
                    <div>${app.name}</div>
                </div>
                ${app.email ? `
                <div class="detail-row">
                    <div class="detail-label">ì´ë©”ì¼</div>
                    <div>${app.email}</div>
                </div>
                ` : ''}
                <div class="detail-row">
                    <div class="detail-label">ì—°ë½ì²˜</div>
                    <div>${app.phone || '-'}</div>
                </div>
                ${app.organization ? `
                <div class="detail-row">
                    <div class="detail-label">ì†Œì†</div>
                    <div>${app.organization}</div>
                </div>
                ` : ''}
                <div class="detail-row">
                    <div class="detail-label">ì§ë¬´</div>
                    <div>${app.position || '-'}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ìƒíƒœ</div>
                    <div><span class="status-badge status-${app.status || 'pending'}">${app.status === 'approved' ? 'ìŠ¹ì¸ë¨' : app.status === 'rejected' ? 'ê±°ì ˆë¨' : 'ëŒ€ê¸° ì¤‘'}</span></div>
                </div>
            `;

            $('#detail-content').html(detailHtml);
            $('#detail-modal').css('display', 'flex');
        }

        function updateApplicationStatus(id, status) {
            const appIndex = applications.findIndex(a => a.id === id);
            if (appIndex === -1) {
                alert('ì‹ ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            applications[appIndex].status = status;
            
            try {
                localStorage.setItem('applications', JSON.stringify(applications));
                $('#detail-modal').css('display', 'none');
                currentApplicationId = null;
                loadApplications();
                alert(`ì‹ ì²­ì´ ${status === 'approved' ? 'ìŠ¹ì¸' : 'ê±°ì ˆ'}ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            } catch (e) {
                console.error('Error updating application:', e);
                alert('ìƒíƒœ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. localStorage ìš©ëŸ‰ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            }
        }

        // ì‹ ì²­ ë‚´ì—­ ì‚­ì œ í•¨ìˆ˜
        function deleteApplication(id) {
            console.log('deleteApplication called with id:', id, 'type:', typeof id);
            try {
                // Find the application to determine its type
                const app = applications.find(a => String(a.id) === String(id));
                if (!app) {
                    alert('ì‹ ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                // Check if it's an AI Workshop application
                if (app.applicationType === 'aiw-workshop') {
                    // Delete from AI Workshop applications
                    const aiwStored = localStorage.getItem('aiw-applications');
                    if (aiwStored) {
                        let aiwApps = JSON.parse(aiwStored);
                        aiwApps = aiwApps.filter(a => String(a.id) !== String(id));
                        localStorage.setItem('aiw-applications', JSON.stringify(aiwApps));
                    }
                } else {
                    // Delete from regular applications
                    const stored = localStorage.getItem('applications');
                    if (!stored) {
                        alert('ì‹ ì²­ ë‚´ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                        return;
                    }
                    
                    let apps = JSON.parse(stored);
                    const appIndex = apps.findIndex(a => {
                        if (!a || !a.id) return false;
                        return String(a.id) === String(id);
                    });
                    
                    if (appIndex === -1) {
                        alert('ì‹ ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: ' + id);
                        return;
                    }

                    apps.splice(appIndex, 1);
                    localStorage.setItem('applications', JSON.stringify(apps));
                }
                
                // ë°ì´í„° ë‹¤ì‹œ ë¡œë“œí•˜ì—¬ í™”ë©´ ê°±ì‹  (ê°€ì¥ í™•ì‹¤í•œ ë°©ë²•)
                loadApplications();
                
                alert('ì‹ ì²­ ë‚´ì—­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error deleting application:', e);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
            }
        }

        // íšŒì› ì‚­ì œ í•¨ìˆ˜
        function deleteUser(id) {
            console.log('âœ… [deleteUser] Called with id:', id, 'type:', typeof id);
            
            // ID ìœ íš¨ì„± ê²€ì‚¬
            if (!id || id === '' || id === 'undefined' || id === 'null') {
                console.error('âŒ [deleteUser] Invalid ID:', id);
                alert('íšŒì› IDê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
            
            try {
                // localStorageì—ì„œ ì§ì ‘ ì½ì–´ì™€ì„œ ì‚­ì œ
                const stored = localStorage.getItem('users');
                if (!stored) {
                    alert('íšŒì› ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                let userList = JSON.parse(stored);
                console.log('âœ… [deleteUser] Current users in localStorage:', userList.length);
                console.log('âœ… [deleteUser] Searching for ID:', id, 'type:', typeof id);
                console.log('âœ… [deleteUser] All user IDs:', userList.map(u => ({ id: u ? u.id : 'null', type: typeof (u ? u.id : null) })));
                
                // IDë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ë¹„êµ (ë” ìœ ì—°í•œ ë¹„êµ)
                const userIndex = userList.findIndex(u => {
                    if (!u || !u.id) {
                        return false;
                    }
                    // ì—¬ëŸ¬ ë°©ì‹ìœ¼ë¡œ ë¹„êµ ì‹œë„
                    const idStr = String(id).trim();
                    const userIdStr = String(u.id).trim();
                    const matches = idStr === userIdStr || 
                                   String(id) === String(u.id) ||
                                   Number(id) === Number(u.id) && !isNaN(Number(id)) && !isNaN(Number(u.id));
                    if (matches) {
                        console.log('âœ… [deleteUser] Found user:', u);
                        console.log('âœ… [deleteUser] Match details:', {
                            searchId: idStr,
                            userId: userIdStr,
                            exactMatch: idStr === userIdStr
                        });
                    }
                    return matches;
                });
                console.log('âœ… [deleteUser] Found index:', userIndex);
                
                if (userIndex === -1) {
                    console.error('âŒ [deleteUser] User not found. Searching ID:', id);
                    console.error('âŒ [deleteUser] Available users:', userList.map(u => ({
                        id: u ? u.id : 'null',
                        email: u ? u.email : 'null',
                        name: u ? u.name : 'null'
                    })));
                    alert('íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: ' + id + '\n\nì½˜ì†”ì„ í™•ì¸í•˜ì—¬ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                    return;
                }

                // ë°°ì—´ì—ì„œ ì‚­ì œ
                userList.splice(userIndex, 1);
                console.log('âœ… [deleteUser] After delete, users:', userList.length);
                
                // localStorageì— ì €ì¥
                localStorage.setItem('users', JSON.stringify(userList));
                console.log('âœ… [deleteUser] Saved to localStorage');
                
                // ì „ì—­ ë³€ìˆ˜ usersë„ ì§ì ‘ ì—…ë°ì´íŠ¸
                const globalUserIndex = users.findIndex(u => {
                    if (!u || !u.id) return false;
                    const idStr = String(id).trim();
                    const userIdStr = String(u.id).trim();
                    return idStr === userIdStr || 
                           String(id) === String(u.id) ||
                           Number(id) === Number(u.id) && !isNaN(Number(id)) && !isNaN(Number(u.id));
                });
                if (globalUserIndex !== -1) {
                    users.splice(globalUserIndex, 1);
                    console.log('âœ… [deleteUser] Global users array updated, new length:', users.length);
                } else {
                    console.warn('âš ï¸ [deleteUser] User not found in global users array');
                }
                
                // í•„í„°ë§ëœ ëª©ë¡ë„ ê°±ì‹ 
                const currentSearchTerm = $('#user-search-input').val().toLowerCase();
                console.log('âœ… [deleteUser] Current search term:', currentSearchTerm);
                
                // ì „ì—­ ë³€ìˆ˜ usersë¥¼ ì§ì ‘ ì—…ë°ì´íŠ¸í•œ í›„ ì¦‰ì‹œ í™”ë©´ ê°±ì‹ 
                // loadUsers()ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ, ë¨¼ì € ì§ì ‘ ê°±ì‹ 
                filterUsers();
                
                // ë°ì´í„° ë‹¤ì‹œ ë¡œë“œí•˜ì—¬ í™”ë©´ ê°±ì‹  (ê°€ì¥ í™•ì‹¤í•œ ë°©ë²•)
                loadUsers();
                
                console.log('âœ… [deleteUser] User deleted successfully');
                alert('íšŒì›ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('âŒ [deleteUser] Error:', e);
                console.error('âŒ [deleteUser] Error stack:', e.stack);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
            }
        }

        // íšŒì› ìˆ˜ì • ëª¨ë‹¬ ì—´ê¸°
        function openUserEditModal(userId) {
            console.log('âœ… [openUserEditModal] Called with userId:', userId, 'type:', typeof userId);
            
            // ID ìœ íš¨ì„± ê²€ì‚¬
            if (!userId || userId === '' || userId === 'undefined' || userId === 'null') {
                console.error('âŒ [openUserEditModal] Invalid ID:', userId);
                alert('íšŒì› IDê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
            
            try {
                const stored = localStorage.getItem('users');
                if (!stored) {
                    alert('íšŒì› ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                const userList = JSON.parse(stored);
                console.log('âœ… [openUserEditModal] Current users in localStorage:', userList.length);
                console.log('âœ… [openUserEditModal] Searching for ID:', userId, 'type:', typeof userId);
                console.log('âœ… [openUserEditModal] All user IDs:', userList.map(u => ({ id: u ? u.id : 'null', type: typeof (u ? u.id : null) })));
                
                // IDë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ë¹„êµ (ë” ìœ ì—°í•œ ë¹„êµ)
                // userIdê°€ ì´ë©”ì¼ì¼ ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ ì´ë©”ì¼ë¡œë„ ê²€ìƒ‰
                const user = userList.find(u => {
                    if (!u) {
                        return false;
                    }
                    
                    // ì—¬ëŸ¬ ë°©ì‹ìœ¼ë¡œ ë¹„êµ ì‹œë„
                    const idStr = String(userId).trim();
                    
                    // 1. user.idì™€ ë¹„êµ
                    if (u.id) {
                        const userIdStr = String(u.id).trim();
                        if (idStr === userIdStr || 
                            String(userId) === String(u.id) ||
                            Number(userId) === Number(u.id) && !isNaN(Number(userId)) && !isNaN(Number(u.id))) {
                            console.log('âœ… [openUserEditModal] Found user by id:', u);
                            return true;
                        }
                    }
                    
                    // 2. user.emailê³¼ ë¹„êµ (userIdê°€ ì´ë©”ì¼ì¼ ìˆ˜ ìˆìŒ)
                    if (u.email && u.email === idStr) {
                        console.log('âœ… [openUserEditModal] Found user by email:', u);
                        return true;
                    }
                    
                    return false;
                });
                
                if (!user) {
                    console.error('âŒ [openUserEditModal] User not found. Searching ID:', userId);
                    console.error('âŒ [openUserEditModal] Available users:', userList.map(u => ({
                        id: u ? u.id : 'null',
                        email: u ? u.email : 'null',
                        name: u ? u.name : 'null'
                    })));
                    alert('íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: ' + userId + '\n\nì½˜ì†”ì„ í™•ì¸í•˜ì—¬ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                    return;
                }
                
                // í¼ í•„ë“œ ì±„ìš°ê¸°
                $('#user-edit-id').val(user.id);
                $('#user-edit-name').val(user.name || '');
                $('#user-edit-email').val(user.email || '');
                $('#user-edit-phone').val(user.phone || '');
                
                // ìŠ¹ì¸ ìƒíƒœ ì„¤ì •
                const isApproved = user.approved === true || user.status === 'approved';
                $('#user-edit-status').val(isApproved ? 'approved' : 'pending');
                
                // ê°€ì… ë°©ë²• ì„¤ì •
                const authMethod = user.authMethod || 'normal';
                $('#user-edit-auth-method').val(authMethod);
                
                // ì†Œì…œ ì œê³µì ì„¤ì •
                if (authMethod === 'social' && user.authProvider) {
                    $('#user-edit-auth-provider').val(user.authProvider);
                    $('#user-edit-auth-provider-group').show();
                } else {
                    $('#user-edit-auth-provider').val('');
                    $('#user-edit-auth-provider-group').hide();
                }
                
                // ëª¨ë‹¬ í‘œì‹œ
                $('#user-edit-modal').css('display', 'flex');
            } catch (e) {
                console.error('Error opening user edit modal:', e);
                alert('íšŒì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // íšŒì› ìˆ˜ì • ëª¨ë‹¬ ë‹«ê¸°
        function closeUserEditModal() {
            $('#user-edit-modal').css('display', 'none');
            $('#user-edit-form')[0].reset();
            $('#user-edit-id').val('');
        }

        // íšŒì› ìˆ˜ì • ì €ì¥
        function saveUserEdit() {
            try {
                const userId = $('#user-edit-id').val();
                if (!userId) {
                    alert('íšŒì› IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                const stored = localStorage.getItem('users');
                if (!stored) {
                    alert('íšŒì› ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                let userList = JSON.parse(stored);
                const userIndex = userList.findIndex(u => {
                    if (!u || !u.id) return false;
                    return String(u.id) === String(userId);
                });
                
                if (userIndex === -1) {
                    alert('íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                // í¼ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const name = $('#user-edit-name').val().trim();
                const email = $('#user-edit-email').val().trim();
                const phone = $('#user-edit-phone').val().trim();
                const status = $('#user-edit-status').val();
                const authMethod = $('#user-edit-auth-method').val();
                const authProvider = authMethod === 'social' ? $('#user-edit-auth-provider').val() : '';
                
                // ìœ íš¨ì„± ê²€ì‚¬
                if (!name) {
                    alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                if (!email) {
                    alert('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                // ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸ (í˜„ì¬ íšŒì› ì œì™¸)
                const emailExists = userList.some((u, index) => {
                    if (index === userIndex) return false;
                    return u && u.email && u.email.toLowerCase() === email.toLowerCase();
                });
                if (emailExists) {
                    alert('ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.');
                    return;
                }
                
                // íšŒì› ì •ë³´ ì—…ë°ì´íŠ¸
                const user = userList[userIndex];
                user.name = name;
                user.email = email;
                user.phone = phone || '';
                user.status = status;
                user.approved = status === 'approved';
                user.authMethod = authMethod;
                if (authMethod === 'social') {
                    user.authProvider = authProvider || '';
                } else {
                    user.authProvider = '';
                }
                
                // localStorageì— ì €ì¥
                localStorage.setItem('users', JSON.stringify(userList));
                
                // ì „ì—­ ë³€ìˆ˜ usersë„ ì—…ë°ì´íŠ¸
                const globalUserIndex = users.findIndex(u => {
                    if (!u || !u.id) return false;
                    return String(u.id) === String(userId);
                });
                if (globalUserIndex !== -1) {
                    users[globalUserIndex] = { ...user };
                    console.log('âœ… [saveUserEdit] Global users array updated');
                }
                
                // í™”ë©´ ê°±ì‹ 
                loadUsers();
                
                // ëª¨ë‹¬ ë‹«ê¸°
                closeUserEditModal();
                
                alert('íšŒì› ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error saving user edit:', e);
                alert('íšŒì› ì •ë³´ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
            }
        }

        // ë¬¸ì˜ ì‚­ì œ í•¨ìˆ˜
        function deleteInquiry(id) {
            console.log('deleteInquiry called with id:', id);
            try {
                // localStorageì—ì„œ ì§ì ‘ ì½ì–´ì™€ì„œ ì‚­ì œ
                const stored = localStorage.getItem('inquiries');
                if (!stored) {
                    alert('ë¬¸ì˜ ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                let inquiryList = JSON.parse(stored);
                console.log('Current inquiries:', inquiryList.length);
                console.log('Looking for id:', id, 'Type:', typeof id);
                console.log('All inquiry ids:', inquiryList.map(i => ({id: i.id, type: typeof i.id})));
                
                const inquiryIndex = inquiryList.findIndex(i => {
                    if (!i || !i.id) return false;
                    // IDë¥¼ ë¬¸ìì—´ë¡œ ë¹„êµ
                    return String(i.id) === String(id);
                });
                console.log('Found index:', inquiryIndex);
                
                if (inquiryIndex === -1) {
                    alert('ë¬¸ì˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: ' + id);
                    return;
                }

                // ë°°ì—´ì—ì„œ ì‚­ì œ
                inquiryList.splice(inquiryIndex, 1);
                console.log('After delete, inquiries:', inquiryList.length);
                
                // localStorageì— ì €ì¥
                localStorage.setItem('inquiries', JSON.stringify(inquiryList));
                
                // ì „ì—­ ë°°ì—´ ì—…ë°ì´íŠ¸
                inquiries = inquiryList;
                
                // í†µê³„ ì—…ë°ì´íŠ¸
                updateInquiryStatistics();
                
                // í•„í„° ì¡°ê±´ ì ìš©í•˜ì—¬ ì¦‰ì‹œ ë Œë”ë§
                const searchTerm = $('#inquiry-search-input').val().toLowerCase();
                let filtered = inquiries;
                if (searchTerm) {
                    filtered = filtered.filter(i => 
                        (i.title && i.title.toLowerCase().includes(searchTerm)) ||
                        (i.content && i.content.toLowerCase().includes(searchTerm)) ||
                        (i.author && i.author.toLowerCase().includes(searchTerm)) ||
                        (i.authorEmail && i.authorEmail.toLowerCase().includes(searchTerm))
                    );
                }
                
                console.log('Filtered inquiries:', filtered.length);
                
                // í…Œì´ë¸” ì™„ì „íˆ ë¹„ìš°ê³  ë‹¤ì‹œ ë Œë”ë§
                const tbody = $('#inquiries-tbody');
                tbody.empty();
                renderInquiries(filtered);
                
                console.log('Rendering complete');
                alert('ë¬¸ì˜ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error deleting inquiry:', e);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
            }
        }
        
        // ì—‘ì…€ ë‚´ë³´ë‚´ê¸° í•¨ìˆ˜
        function exportToExcel(data, type) {
            if (!data || data.length === 0) {
                alert('ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            // SheetJS ë¼ì´ë¸ŒëŸ¬ë¦¬ í™•ì¸
            if (typeof XLSX === 'undefined') {
                alert('ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            let headers = [];
            let rows = [];
            
            if (type === 'applications') {
                headers = ['ì‹ ì²­ì¼ì‹œ', 'ì´ë¦„', 'ì´ë©”ì¼', 'ì—°ë½ì²˜', 'ê³¼ì •/ìœ í˜•', 'í¬ë§ì¼ì •', 'í¬ë§ì‹œê°„', 'ì†Œì†', 'ì§ë¬´', 'ìƒíƒœ'];
                data.forEach(app => {
                    const date = new Date(app.submittedAt);
                    const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                                   date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                    const statusText = {
                        'pending': 'ëŒ€ê¸° ì¤‘',
                        'approved': 'ìŠ¹ì¸ë¨',
                        'rejected': 'ê±°ì ˆë¨'
                    }[app.status || 'pending'] || 'ëŒ€ê¸° ì¤‘';
                    
                    rows.push([
                        dateStr,
                        app.name || '',
                        app.email || '',
                        app.phone || '',
                        app.courseTitle || app.applicationType || '',
                        app.preferredSchedule || '',
                        app.preferredTime || '',
                        app.organization || '',
                        app.position || '',
                        statusText
                    ]);
                });
            } else if (type === 'users') {
                headers = ['ê°€ì…ì¼ì‹œ', 'ì´ë¦„', 'ì´ë©”ì¼', 'ì „í™”ë²ˆí˜¸', 'ê°€ì…ë°©ë²•', 'ìƒíƒœ'];
                data.forEach(user => {
                    // registeredAtì´ ì—†ìœ¼ë©´ idë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‚ ì§œ ìƒì„±
                    let registeredDate = user.registeredAt;
                    if (!registeredDate && user.id) {
                        const timestamp = parseInt(user.id);
                        if (!isNaN(timestamp) && timestamp > 1000000000000) {
                            registeredDate = new Date(timestamp).toISOString();
                        } else {
                            registeredDate = new Date().toISOString();
                        }
                    } else if (!registeredDate) {
                        registeredDate = new Date().toISOString();
                    }
                    
                    const date = new Date(registeredDate);
                    const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                                   date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                    
                    // ê°€ì… ë°©ë²• í‘œì‹œ
                    let authMethod = 'ì¼ë°˜';
                    if (user.authMethod === 'social' && user.authProvider) {
                        const providerNames = {
                            'google': 'Google',
                            'naver': 'Naver',
                            'kakao': 'Kakao',
                            'apple': 'Apple'
                        };
                        authMethod = providerNames[user.authProvider] || user.authProvider || 'ì†Œì…œ';
                    } else if (user.authMethod === 'social') {
                        authMethod = 'ì†Œì…œ';
                    } else {
                        authMethod = 'ì¼ë°˜';
                    }
                    
                    const statusText = user.status === 'active' ? 'í™œì„±' : 'ë¹„í™œì„±';
                    
                    rows.push([
                        dateStr,
                        user.name || '',
                        user.email || '',
                        user.phone || '',
                        authMethod,
                        statusText
                    ]);
                });
            } else if (type === 'inquiries') {
                headers = ['ì‘ì„±ì¼ì‹œ', 'ì œëª©', 'ì‘ì„±ì', 'ì´ë©”ì¼', 'ë‚´ìš©', 'ë‹µë³€ ìˆ˜'];
                data.forEach(inquiry => {
                    const date = new Date(inquiry.createdAt);
                    const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                                   date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                    const answerCount = inquiry.answers ? inquiry.answers.length : 0;
                    const contentPreview = inquiry.content ? (inquiry.content.length > 100 ? inquiry.content.substring(0, 100) + '...' : inquiry.content) : '';
                    
                    rows.push([
                        dateStr,
                        inquiry.title || '',
                        inquiry.author || '',
                        inquiry.authorEmail || '',
                        contentPreview,
                        answerCount
                    ]);
                });
            } else if (type === 'login-history') {
                headers = ['ë¡œê·¸ì¸ ì¼ì‹œ', 'ì´ë¦„', 'ì´ë©”ì¼', 'IP ì£¼ì†Œ', 'ë¸Œë¼ìš°ì €'];
                data.forEach(record => {
                    if (!record.loginAt) return;
                    const date = new Date(record.loginAt);
                    if (isNaN(date.getTime())) return;
                    
                    const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                                   date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                    
                    // User Agentì—ì„œ ë¸Œë¼ìš°ì € ì •ë³´ ì¶”ì¶œ
                    let browserInfo = 'ì•Œ ìˆ˜ ì—†ìŒ';
                    if (record.userAgent) {
                        if (record.userAgent.includes('Chrome') && !record.userAgent.includes('Edg')) {
                            browserInfo = 'Chrome';
                        } else if (record.userAgent.includes('Firefox')) {
                            browserInfo = 'Firefox';
                        } else if (record.userAgent.includes('Safari') && !record.userAgent.includes('Chrome')) {
                            browserInfo = 'Safari';
                        } else if (record.userAgent.includes('Edg')) {
                            browserInfo = 'Edge';
                        } else if (record.userAgent.includes('Opera')) {
                            browserInfo = 'Opera';
                        } else {
                            browserInfo = record.userAgent.substring(0, 50) + '...';
                        }
                    }
                    
                    rows.push([
                        dateStr,
                        record.userName || '',
                        record.userEmail || '',
                        record.ipAddress || 'N/A',
                        browserInfo
                    ]);
                });
            }
            
            // ì›Œí¬ë¶ ìƒì„±
            const wb = XLSX.utils.book_new();
            
            // ë°ì´í„° ë°°ì—´ ìƒì„± (í—¤ë” + ë°ì´í„°)
            const wsData = [headers, ...rows];
            
            // ì›Œí¬ì‹œíŠ¸ ìƒì„±
            const ws = XLSX.utils.aoa_to_sheet(wsData);
            
            // ì»¬ëŸ¼ ë„ˆë¹„ ì„¤ì •
            const colWidths = headers.map((header, idx) => {
                // ê° ì»¬ëŸ¼ì˜ ìµœëŒ€ ê¸¸ì´ ê³„ì‚°
                const maxLength = Math.max(
                    header.length,
                    ...rows.map(row => String(row[idx] || '').length)
                );
                return { wch: Math.min(Math.max(maxLength + 2, 10), 50) }; // ìµœì†Œ 10, ìµœëŒ€ 50
            });
            ws['!cols'] = colWidths;
            
            // ì›Œí¬ì‹œíŠ¸ë¥¼ ì›Œí¬ë¶ì— ì¶”ê°€
            let sheetName = 'ë°ì´í„°';
            if (type === 'applications') sheetName = 'ì‹ ì²­ ë‚´ì—­';
            else if (type === 'users') sheetName = 'íšŒì› ëª©ë¡';
            else if (type === 'inquiries') sheetName = 'ë¬¸ì˜ ë‚´ì—­';
            else if (type === 'login-history') sheetName = 'ë¡œê·¸ì¸ ì´ë ¥';
            
            XLSX.utils.book_append_sheet(wb, ws, sheetName);
            
            // íŒŒì¼ëª… ìƒì„±
            let fileName = 'ë°ì´í„°';
            if (type === 'applications') fileName = 'ì‹ ì²­ë‚´ì—­';
            else if (type === 'users') fileName = 'íšŒì›ëª©ë¡';
            else if (type === 'inquiries') fileName = 'ë¬¸ì˜ë‚´ì—­';
            else if (type === 'login-history') fileName = 'ë¡œê·¸ì¸ì´ë ¥';
            
            fileName = `${fileName}_${new Date().toISOString().split('T')[0]}.xlsx`;
            
            // ì—‘ì…€ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
            XLSX.writeFile(wb, fileName);
        }

        // ë¡œê·¸ì¸ ì´ë ¥ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function loadLoginHistory() {
            try {
                const stored = localStorage.getItem('loginHistory');
                console.log('Loading login history from localStorage:', stored ? 'found' : 'not found');
                
                if (stored) {
                    const parsed = JSON.parse(stored);
                    console.log('Parsed login history:', parsed);
                    
                    // ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
                    loginHistory = Array.isArray(parsed) ? parsed.filter(h => {
                        // í•„ìˆ˜ í•„ë“œ í™•ì¸
                        const isValid = h && h.id && h.loginAt && h.userEmail;
                        if (!isValid) {
                            console.warn('Invalid login history record:', h);
                        }
                        return isValid;
                    }) : [];
                    
                    console.log('Filtered login history:', loginHistory.length, 'valid records');
                    
                    // Sort by date (newest first)
                    loginHistory.sort((a, b) => {
                        const dateA = new Date(a.loginAt);
                        const dateB = new Date(b.loginAt);
                        return dateB - dateA;
                    });
                } else {
                    loginHistory = [];
                    console.log('No login history found in localStorage');
                }
                
                updateLoginHistoryStatistics();
                filterLoginHistory();
            } catch (e) {
                console.error('Error loading login history:', e);
                loginHistory = [];
                updateLoginHistoryStatistics();
                filterLoginHistory();
            }
        }

        function updateLoginHistoryStatistics() {
            const total = loginHistory.length;
            
            // ì˜¤ëŠ˜ ë¡œê·¸ì¸ ìˆ˜ ê³„ì‚°
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const todayLogins = loginHistory.filter(h => {
                const loginDateValue = h.loginAt || h.loginAt || h.createdAt || h.date;
                if (!loginDateValue) return false;
                const loginDate = new Date(loginDateValue);
                if (isNaN(loginDate.getTime())) return false;
                loginDate.setHours(0, 0, 0, 0);
                return loginDate.getTime() === today.getTime();
            }).length;
            
            // ê³ ìœ  ì‚¬ìš©ì ìˆ˜ ê³„ì‚°
            const uniqueEmails = new Set(loginHistory.map(h => h.userEmail));
            const uniqueUsers = uniqueEmails.size;

            $('#total-logins').text(total);
            $('#today-logins').text(todayLogins);
            $('#unique-users').text(uniqueUsers);
        }

        function filterLoginHistory() {
            const searchTerm = $('#login-search-input').val().toLowerCase();
            const dateFrom = $('#login-date-from').val();
            const dateTo = $('#login-date-to').val();

            let filtered = loginHistory;

            // ê²€ìƒ‰ì–´ í•„í„°
            if (searchTerm) {
                filtered = filtered.filter(h => 
                    (h.userEmail && h.userEmail.toLowerCase().includes(searchTerm)) ||
                    (h.userName && h.userName.toLowerCase().includes(searchTerm))
                );
            }

            // ë‚ ì§œ í•„í„°
            if (dateFrom) {
                const fromDate = new Date(dateFrom);
                fromDate.setHours(0, 0, 0, 0);
                filtered = filtered.filter(h => {
                    const loginDate = new Date(h.loginAt);
                    loginDate.setHours(0, 0, 0, 0);
                    return loginDate >= fromDate;
                });
            }

            if (dateTo) {
                const toDate = new Date(dateTo);
                toDate.setHours(23, 59, 59, 999);
                filtered = filtered.filter(h => {
                    const loginDate = new Date(h.loginAt);
                    return loginDate <= toDate;
                });
            }

            renderLoginHistory(filtered);
        }

        // ì„ íƒ ëª¨ë“œ ì—…ë°ì´íŠ¸
        function updateSelectionMode() {
            const mode = $('input[name="selection-mode"]:checked').val();
            const isPartialMode = mode === 'partial';
            
            if (isPartialMode) {
                $('.login-history-checkbox').show();
                $('#select-all-logins-checkbox').show();
                $('#select-all-logins-btn').show();
                $('#deselect-all-logins-btn').show();
                $('#delete-selected-logins-btn').show();
            } else {
                $('.login-history-checkbox').hide();
                $('#select-all-logins-checkbox').hide();
                $('#select-all-logins-btn').hide();
                $('#deselect-all-logins-btn').hide();
                $('#delete-selected-logins-btn').hide();
            }
        }

        // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ì—…ë°ì´íŠ¸
        function updateSelectAllCheckbox() {
            const totalCheckboxes = $('.login-history-checkbox:visible').length;
            const checkedCheckboxes = $('.login-history-checkbox:visible:checked').length;
            $('#select-all-logins-checkbox').prop('checked', totalCheckboxes > 0 && totalCheckboxes === checkedCheckboxes);
        }

        // ì„ íƒëœ ë¡œê·¸ì¸ ì´ë ¥ ì‚­ì œ
        function deleteSelectedLoginHistory(ids) {
            if (!ids || ids.length === 0) {
                alert('ì‚­ì œí•  í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            // IDsë¥¼ Setìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë¹ ë¥¸ ê²€ìƒ‰
            const idsSet = new Set(ids);
            
            // ì‚­ì œí•  í•­ëª© ì œê±°
            loginHistory = loginHistory.filter(h => !idsSet.has(h.id));
            
            try {
                localStorage.setItem('loginHistory', JSON.stringify(loginHistory));
                loadLoginHistory();
                alert(`${ids.length}ê°œì˜ ë¡œê·¸ì¸ ì´ë ¥ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
            } catch (e) {
                console.error('Error deleting login history:', e);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function renderLoginHistory(historyList) {
            const tbody = $('#login-history-tbody');
            tbody.empty();

            if (historyList.length === 0) {
                tbody.html('<tr><td colspan="6" class="no-applications">ë¡œê·¸ì¸ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            historyList.forEach(record => {
                if (!record.loginAt) {
                    console.warn('Record missing loginAt:', record);
                    return;
                }
                
                const date = new Date(record.loginAt);
                if (isNaN(date.getTime())) {
                    console.warn('Invalid date in record:', record);
                    return;
                }
                
                const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                               date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                
                // User Agentì—ì„œ ë¸Œë¼ìš°ì € ì •ë³´ ì¶”ì¶œ
                let browserInfo = 'ì•Œ ìˆ˜ ì—†ìŒ';
                if (record.userAgent) {
                    if (record.userAgent.includes('Chrome') && !record.userAgent.includes('Edg')) {
                        browserInfo = 'Chrome';
                    } else if (record.userAgent.includes('Firefox')) {
                        browserInfo = 'Firefox';
                    } else if (record.userAgent.includes('Safari') && !record.userAgent.includes('Chrome')) {
                        browserInfo = 'Safari';
                    } else if (record.userAgent.includes('Edg')) {
                        browserInfo = 'Edge';
                    } else if (record.userAgent.includes('Opera')) {
                        browserInfo = 'Opera';
                    } else {
                        browserInfo = record.userAgent.substring(0, 50) + '...';
                    }
                }

                const row = $(`
                    <tr>
                        <td>
                            <input type="checkbox" class="login-history-checkbox" data-id="${record.id}" style="display: none;">
                        </td>
                        <td>${dateStr}</td>
                        <td>${record.userName || '-'}</td>
                        <td>${record.userEmail || '-'}</td>
                        <td>${record.ipAddress || 'N/A'}</td>
                        <td>${browserInfo}</td>
                    </tr>
                `);

                tbody.append(row);
            });
            
            // ì„ íƒ ëª¨ë“œì— ë”°ë¼ ì²´í¬ë°•ìŠ¤ í‘œì‹œ/ìˆ¨ê¹€
            updateSelectionMode();
        }

        // ë¬¸ì˜í•˜ê¸° ê´€ë ¨ í•¨ìˆ˜ë“¤
        function loadInquiries() {
            try {
                const stored = localStorage.getItem('inquiries');
                if (stored) {
                    const parsed = JSON.parse(stored);
                    // ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
                    inquiries = Array.isArray(parsed) ? parsed.filter(i => {
                        // í•„ìˆ˜ í•„ë“œ í™•ì¸
                        return i && i.id && i.title && i.content && i.createdAt;
                    }) : [];
                    // Sort by date (newest first)
                    inquiries.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                } else {
                    inquiries = [];
                }
                updateInquiryStatistics();
                filterInquiries();
            } catch (e) {
                console.error('Error loading inquiries:', e);
                inquiries = [];
                updateInquiryStatistics();
                filterInquiries();
            }
        }

        function updateInquiryStatistics() {
            const total = inquiries.length;
            const answered = inquiries.filter(i => i.answers && i.answers.length > 0).length;
            const pending = total - answered;

            $('#total-inquiries').text(total);
            $('#answered-inquiries').text(answered);
            $('#pending-inquiries').text(pending);
        }

        function filterInquiries() {
            const searchTerm = $('#inquiry-search-input').val().toLowerCase();

            let filtered = inquiries;

            if (searchTerm) {
                filtered = filtered.filter(i => 
                    (i.title && i.title.toLowerCase().includes(searchTerm)) ||
                    (i.content && i.content.toLowerCase().includes(searchTerm)) ||
                    (i.author && i.author.toLowerCase().includes(searchTerm)) ||
                    (i.authorEmail && i.authorEmail.toLowerCase().includes(searchTerm))
                );
            }

            renderInquiries(filtered);
        }

        function renderInquiries(inquiryList) {
            const tbody = $('#inquiries-tbody');
            tbody.empty();

            if (inquiryList.length === 0) {
                tbody.html('<tr><td colspan="6" class="no-applications">ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            inquiryList.forEach(inquiry => {
                const date = new Date(inquiry.createdAt);
                const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                               date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                
                const answerCount = inquiry.answers ? inquiry.answers.length : 0;
                const titlePreview = inquiry.title.length > 30 ? inquiry.title.substring(0, 30) + '...' : inquiry.title;

                const row = $(`
                    <tr>
                        <td>${dateStr}</td>
                        <td>${titlePreview}</td>
                        <td>${inquiry.author || '-'}</td>
                        <td>${inquiry.authorEmail || '-'}</td>
                        <td>${answerCount}</td>
                        <td>
                            <button class="btn btn-sm btn-outline view-inquiry-detail" data-id="${inquiry.id}" style="margin-right: 0.5rem;">ìƒì„¸ë³´ê¸°</button>
                            <button class="btn btn-sm" style="background: #ef4444; color: white; border: none;" data-id="${inquiry.id}" data-action="delete-inquiry">ì‚­ì œ</button>
                        </td>
                    </tr>
                `);

                row.find('.view-inquiry-detail').on('click', function() {
                    showInquiryDetail(inquiry.id);
                });

                row.find('[data-action="delete-inquiry"]').on('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const id = $(this).data('id');
                    console.log('Delete inquiry button clicked, id:', id);
                    if (confirm('ì •ë§ë¡œ ì´ ë¬¸ì˜ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        deleteInquiry(id);
                    }
                });

                tbody.append(row);
            });
        }

        function showInquiryDetail(id) {
            const inquiry = inquiries.find(i => i.id === id);
            if (!inquiry) return;

            const date = new Date(inquiry.createdAt);
            const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                           date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });

            let answersHtml = '';
            if (inquiry.answers && inquiry.answers.length > 0) {
                answersHtml = '<div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid var(--border);"><h3 style="margin-bottom: 1rem;">ë‹µë³€</h3>';
                inquiry.answers.forEach(function(answer) {
                    const answerDate = new Date(answer.createdAt);
                    const answerDateStr = answerDate.toLocaleDateString('ko-KR') + ' ' + 
                                         answerDate.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                    answersHtml += `
                        <div style="padding: 1rem; background: #f9fafb; border-radius: 0.5rem; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                <span style="font-weight: 500;">${answer.author || 'ìµëª…'}</span>
                                <span style="font-size: 0.875rem; color: var(--text-muted);">${answerDateStr}</span>
                            </div>
                            <p style="line-height: 1.8; color: #171717; margin: 0; white-space: pre-line;">${answer.content}</p>
                        </div>
                    `;
                });
                answersHtml += '</div>';
            } else {
                answersHtml = '<div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid var(--border);"><p style="color: var(--text-muted);">ì•„ì§ ë‹µë³€ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>';
            }

            const detailHtml = `
                <div class="detail-row">
                    <div class="detail-label">ì‘ì„±ì¼ì‹œ</div>
                    <div>${dateStr}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ì œëª©</div>
                    <div>${inquiry.title}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ì‘ì„±ì</div>
                    <div>${inquiry.author || '-'}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ì´ë©”ì¼</div>
                    <div>${inquiry.authorEmail || '-'}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ë‚´ìš©</div>
                    <div style="white-space: pre-line; line-height: 1.8;">${inquiry.content}</div>
                </div>
                ${answersHtml}
            `;

            $('#detail-content').html(detailHtml);
            $('#detail-modal').css('display', 'flex');
            
            // ìŠ¹ì¸/ê±°ì ˆ ë²„íŠ¼ ìˆ¨ê¸°ê¸° (ë¬¸ì˜ëŠ” ìŠ¹ì¸/ê±°ì ˆì´ ì—†ìŒ)
            $('#approve-btn, #reject-btn').hide();
        }

        // ê³µì§€ì‚¬í•­ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function loadNotices() {
            try {
                const stored = localStorage.getItem('communityNotices');
                if (stored) {
                    const parsed = JSON.parse(stored);
                    notices = Array.isArray(parsed) ? parsed.filter(n => {
                        return n && n.id && n.title && n.content && n.createdAt;
                    }) : [];
                    notices.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                } else {
                    notices = [];
                }
                updateNoticeStatistics();
                filterNotices();
            } catch (e) {
                console.error('Error loading notices:', e);
                notices = [];
                updateNoticeStatistics();
                filterNotices();
            }
        }

        function updateNoticeStatistics() {
            const total = notices.length;
            const published = notices.filter(n => n.status === 'published').length;
            const draft = notices.filter(n => n.status === 'draft').length;

            $('#total-notices').text(total);
            $('#published-notices').text(published);
            $('#draft-notices').text(draft);
        }

        function filterNotices() {
            const searchTerm = $('#notice-search-input').val().toLowerCase();
            let filtered = notices;

            if (searchTerm) {
                filtered = filtered.filter(n => 
                    (n.title && n.title.toLowerCase().includes(searchTerm)) ||
                    (n.content && n.content.toLowerCase().includes(searchTerm))
                );
            }

            renderNotices(filtered);
        }

        function renderNotices(noticeList) {
            const tbody = $('#notices-tbody');
            tbody.empty();

            if (noticeList.length === 0) {
                tbody.html('<tr><td colspan="6" class="no-applications">ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            noticeList.forEach(notice => {
                const date = new Date(notice.createdAt);
                const dateStr = date.toLocaleDateString('ko-KR') + ' ' + 
                               date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                
                const statusClass = notice.status === 'published' ? 'status-approved' : 'status-pending';
                const statusText = notice.status === 'published' ? 'ê²Œì‹œ ì¤‘' : 'ì„ì‹œì €ì¥';
                const views = notice.views || 0;

                const row = $(`
                    <tr>
                        <td>${dateStr}</td>
                        <td>${notice.title}</td>
                        <td>${notice.author || 'ê´€ë¦¬ì'}</td>
                        <td>${views}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline edit-notice" data-id="${notice.id}" style="margin-right: 0.5rem;">ìˆ˜ì •</button>
                            <button class="btn btn-sm" style="background: #ef4444; color: white; border: none;" data-id="${notice.id}" data-action="delete-notice">ì‚­ì œ</button>
                        </td>
                    </tr>
                `);

                row.find('.edit-notice').on('click', function() {
                    const id = $(this).data('id');
                    editNotice(id);
                });

                row.find('[data-action="delete-notice"]').on('click', function() {
                    const id = $(this).data('id');
                    if (confirm('ì •ë§ë¡œ ì´ ê³µì§€ì‚¬í•­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        deleteNotice(id);
                    }
                });

                tbody.append(row);
            });
        }

        function saveNotice(isPublished) {
            const title = $('#notice-title').val().trim();
            const content = $('#notice-content').val().trim();
            const tagsInput = $('#notice-tags').val().trim();
            const tags = tagsInput ? tagsInput.split(',').map(t => t.trim()).filter(t => t) : [];

            if (!title || !content) {
                alert('ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const noticeData = {
                id: currentNoticeId || Date.now().toString(),
                title: title,
                content: content,
                tags: tags,
                status: isPublished ? 'published' : 'draft',
                author: 'ê´€ë¦¬ì',
                authorRole: 'ìš´ì˜íŒ€',
                views: 0,
                likes: 0,
                comments: 0,
                createdAt: currentNoticeId ? notices.find(n => n.id === currentNoticeId)?.createdAt || new Date().toISOString() : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            if (currentNoticeId) {
                // ìˆ˜ì •
                const index = notices.findIndex(n => n.id === currentNoticeId);
                if (index !== -1) {
                    notices[index] = noticeData;
                }
            } else {
                // ìƒˆë¡œ ì‘ì„±
                notices.push(noticeData);
            }

            try {
                localStorage.setItem('communityNotices', JSON.stringify(notices));
                $('#notice-modal').css('display', 'none');
                currentNoticeId = null;
                loadNotices();
                alert(isPublished ? 'ê³µì§€ì‚¬í•­ì´ ê²Œì‹œë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ê³µì§€ì‚¬í•­ì´ ì„ì‹œì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error saving notice:', e);
                alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function editNotice(id) {
            const notice = notices.find(n => n.id === id);
            if (!notice) return;

            currentNoticeId = id;
            $('#notice-modal-title').text('ê³µì§€ì‚¬í•­ ìˆ˜ì •');
            $('#notice-title').val(notice.title);
            $('#notice-content').val(notice.content);
            $('#notice-tags').val(notice.tags ? notice.tags.join(', ') : '');
            $('#notice-published').prop('checked', notice.status === 'published');
            $('#notice-modal').css('display', 'flex');
        }

        function deleteNotice(id) {
            try {
                // localStorageì—ì„œ ì§ì ‘ ì½ì–´ì™€ì„œ ì‚­ì œ
                const stored = localStorage.getItem('communityNotices');
                if (!stored) {
                    alert('ê³µì§€ì‚¬í•­ ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                let noticeList = JSON.parse(stored);
                const noticeIndex = noticeList.findIndex(n => n && n.id === id);
                
                if (noticeIndex === -1) {
                    alert('ê³µì§€ì‚¬í•­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                // ë°°ì—´ì—ì„œ ì‚­ì œ
                noticeList.splice(noticeIndex, 1);
                
                // localStorageì— ì €ì¥
                localStorage.setItem('communityNotices', JSON.stringify(noticeList));
                
                // ì „ì—­ ë°°ì—´ ì—…ë°ì´íŠ¸
                notices = noticeList;
                
                // í†µê³„ ì—…ë°ì´íŠ¸
                updateNoticeStatistics();
                
                // í™”ë©´ ì¦‰ì‹œ ê°±ì‹  - í•„í„° ì¡°ê±´ ì ìš©í•˜ì—¬ ë Œë”ë§
                const searchTerm = $('#notice-search-input').val().toLowerCase();
                let filtered = notices;
                if (searchTerm) {
                    filtered = filtered.filter(n => 
                        (n.title && n.title.toLowerCase().includes(searchTerm)) ||
                        (n.content && n.content.toLowerCase().includes(searchTerm))
                    );
                }
                
                // í™”ë©´ ê°•ì œ ê°±ì‹ 
                renderNotices(filtered);
                
                alert('ê³µì§€ì‚¬í•­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error deleting notice:', e);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // Courses Management Functions
        function loadCourses() {
            try {
                // Load courses from courses-data.js
                const coursesData = typeof COURSES_DATA !== 'undefined' ? COURSES_DATA : [];
                
                // Load registered courses from localStorage
                const storedCourses = localStorage.getItem('registeredCourses');
                const registeredCourses = storedCourses ? JSON.parse(storedCourses) : [];
                
                // Combine all courses
                const allCourses = [...coursesData, ...registeredCourses];
                
                // Load prices from localStorage
                const storedPrices = localStorage.getItem('coursePrices');
                const prices = storedPrices ? JSON.parse(storedPrices) : {};
                
                // Merge courses with prices (use slug or id as key)
                courses = allCourses.map(course => {
                    const priceKey = course.slug || course.id || '';
                    return {
                        ...course,
                        price: prices[priceKey] || 0
                    };
                });
                
                renderCourses();
            } catch (e) {
                console.error('Error loading courses:', e);
                courses = [];
                renderCourses();
            }
        }

        function renderCourses() {
            const tbody = $('#courses-tbody');
            tbody.empty();

            if (courses.length === 0) {
                tbody.html('<tr><td colspan="5" class="no-applications">ê³¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            // Check which courses are registered (from localStorage)
            const storedCourses = localStorage.getItem('registeredCourses');
            const registeredCourses = storedCourses ? JSON.parse(storedCourses) : [];
            const registeredSlugs = registeredCourses.map(c => c.slug || c.id).filter(Boolean);
            const registeredIds = registeredCourses.map(c => c.id).filter(Boolean);

            courses.forEach(course => {
                // Check if course is registered (by slug or id)
                const courseIdentifier = course.slug || course.id;
                const isRegistered = courseIdentifier && (
                    registeredSlugs.includes(courseIdentifier) || 
                    registeredIds.includes(courseIdentifier)
                );
                
                const deleteButton = isRegistered ? 
                    `<button class="btn btn-sm btn-danger" onclick="deleteCourse('${courseIdentifier}')" style="margin-left: 0.5rem;">ì‚­ì œ</button>` : 
                    '';
                const editButton = isRegistered ? 
                    `<button class="btn btn-sm btn-secondary" onclick="editCourse('${courseIdentifier}')" style="margin-left: 0.5rem;">ìˆ˜ì •</button>` : 
                    '';
                
                // Use slug or id for price management
                const identifier = course.slug || course.id || '';
                
                const row = $(`
                    <tr>
                        <td>${course.title}</td>
                        <td>${course.category}</td>
                        <td>
                            <input type="number" 
                                   class="form-input" 
                                   style="width: 150px; padding: 0.5rem;" 
                                   value="${course.price || 0}" 
                                   data-slug="${identifier}"
                                   onchange="updateCoursePrice('${identifier}', this.value)">
                            <span style="margin-left: 0.5rem;">ì›</span>
                        </td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="saveCoursePrice('${identifier}')">ì €ì¥</button>
                            ${editButton}
                            ${deleteButton}
                        </td>
                    </tr>
                `);
                tbody.append(row);
            });
        }

        function updateCoursePrice(identifier, price) {
            const course = courses.find(c => (c.slug === identifier) || (c.id === identifier));
            if (course) {
                course.price = parseInt(price) || 0;
            }
        }

        function saveCoursePrice(identifier) {
            try {
                const course = courses.find(c => (c.slug === identifier) || (c.id === identifier));
                if (!course) {
                    alert('ê³¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                const storedPrices = localStorage.getItem('coursePrices');
                const prices = storedPrices ? JSON.parse(storedPrices) : {};
                prices[identifier] = course.price || 0;
                localStorage.setItem('coursePrices', JSON.stringify(prices));
                
                alert('ê°€ê²©ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error saving course price:', e);
                alert('ê°€ê²© ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // Course Registration Functions
        let editingCourseId = null; // Track which course is being edited
        
        function openCourseModal(courseId = null) {
            // Ensure courseId is explicitly null/undefined for new course
            if (courseId && courseId !== null && courseId !== undefined && courseId !== '') {
                // Edit mode
                $('#course-modal-title').text('ê³¼ì • ìˆ˜ì •');
                editingCourseId = courseId;
                loadCourseForEdit(courseId);
            } else {
                // Add mode
                $('#course-modal-title').text('ê³¼ì • ë“±ë¡');
                editingCourseId = null;
                $('#course-form')[0].reset();
                // Clear all form fields explicitly
                $('#course-slug').val('');
                $('#course-title').val('');
                $('#course-category').val('');
                $('#course-short-description').val('');
                $('#course-duration').val('');
                $('#course-format').val('');
                $('#course-tools').val('');
                $('#course-full-description').val('');
                $('#course-curriculum').val('');
                $('#course-deliverables').val('');
                $('#course-outcomes').val('');
            }
            $('#course-modal').css('display', 'flex');
        }

        function loadCourseForEdit(courseId) {
            try {
                if (!courseId) {
                    console.error('loadCourseForEdit: courseId is required');
                    return;
                }

                const storedCourses = localStorage.getItem('registeredCourses');
                if (!storedCourses) {
                    alert('ë“±ë¡ëœ ê³¼ì •ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œ ë“±ë¡í•´ì£¼ì„¸ìš”.');
                    closeCourseModal();
                    return;
                }
                
                const registeredCourses = JSON.parse(storedCourses);
                const course = registeredCourses.find(c => (c.slug === courseId) || (c.id === courseId));
                
                if (!course) {
                    alert('ìˆ˜ì •í•  ê³¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    closeCourseModal();
                    return;
                }
                
                // Load course details
                const storedDetails = localStorage.getItem('courseDetails');
                let courseDetails = null;
                if (storedDetails) {
                    const allDetails = JSON.parse(storedDetails);
                    courseDetails = allDetails[courseId] || allDetails[course.slug] || allDetails[course.id];
                }
                
                // Fill form with course data
                $('#course-slug').val(course.slug || '');
                $('#course-title').val(course.title || '');
                $('#course-category').val(course.category || '');
                $('#course-short-description').val(course.shortDescription || '');
                $('#course-duration').val(course.durationLabel || '');
                $('#course-format').val(course.formatLabel || '');
                $('#course-tools').val(course.tools ? course.tools.join(', ') : '');
                
                // Fill detailed information
                if (courseDetails) {
                    $('#course-full-description').val(courseDetails.fullDescription || '');
                    $('#course-deliverables').val(courseDetails.deliverables ? courseDetails.deliverables.join(', ') : '');
                    $('#course-outcomes').val(courseDetails.outcomes ? courseDetails.outcomes.join('\n') : '');
                    
                    // Format curriculum for display (preserve original format)
                    if (courseDetails.curriculum && courseDetails.curriculum.length > 0) {
                        let curriculumText = '';
                        courseDetails.curriculum.forEach((session, index) => {
                            if (index > 0) curriculumText += '\n\n';
                            // Check if title already contains ì£¼ì°¨/ì°¨ì‹œ/Session/Part
                            const title = session.title || '';
                            const hasWeekNumber = /^\d+ì£¼ì°¨/i.test(title) || 
                                                  /^\d+ì°¨ì‹œ/i.test(title) ||
                                                  /^Session\s+\d+/i.test(title) ||
                                                  /^Part\s+\d+/i.test(title) ||
                                                  /^\d+\./.test(title);
                            if (hasWeekNumber) {
                                // Use original title as-is
                                curriculumText += title;
                            } else {
                                // Add week number if not present
                                curriculumText += `${index + 1}ì£¼ì°¨: ${title}`;
                            }
                            if (session.items && session.items.length > 0) {
                                session.items.forEach(item => {
                                    curriculumText += `\n- ${item}`;
                                });
                            }
                        });
                        $('#course-curriculum').val(curriculumText);
                    }
                } else if (course.curriculum || course.deliverables || course.outcomes || course.fullDescription) {
                    // Try to get from course object
                    $('#course-full-description').val(course.fullDescription || '');
                    $('#course-deliverables').val(course.deliverables ? course.deliverables.join(', ') : '');
                    $('#course-outcomes').val(course.outcomes ? course.outcomes.join('\n') : '');
                    
                    if (course.curriculum && course.curriculum.length > 0) {
                        let curriculumText = '';
                        course.curriculum.forEach((session, index) => {
                            if (index > 0) curriculumText += '\n\n';
                            // Check if title already contains ì£¼ì°¨/ì°¨ì‹œ/Session/Part
                            const title = session.title || '';
                            const hasWeekNumber = /^\d+ì£¼ì°¨/i.test(title) || 
                                                  /^\d+ì°¨ì‹œ/i.test(title) ||
                                                  /^Session\s+\d+/i.test(title) ||
                                                  /^Part\s+\d+/i.test(title) ||
                                                  /^\d+\./.test(title);
                            if (hasWeekNumber) {
                                // Use original title as-is
                                curriculumText += title;
                            } else {
                                // Add week number if not present
                                curriculumText += `${index + 1}ì£¼ì°¨: ${title}`;
                            }
                            if (session.items && session.items.length > 0) {
                                session.items.forEach(item => {
                                    curriculumText += `\n- ${item}`;
                                });
                            }
                        });
                        $('#course-curriculum').val(curriculumText);
                    }
                }
            } catch (e) {
                console.error('Error loading course for edit:', e);
                alert('ê³¼ì • ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function editCourse(courseId) {
            openCourseModal(courseId);
        }

        function closeCourseModal() {
            $('#course-modal').hide();
            $('#course-form')[0].reset();
            editingCourseId = null;
        }

        function saveCourse() {
            try {
                const slug = $('#course-slug').val().trim();
                const title = $('#course-title').val().trim();
                const category = $('#course-category').val();
                const shortDescription = $('#course-short-description').val().trim();
                const durationLabel = $('#course-duration').val().trim();
                const formatLabel = $('#course-format').val().trim();
                const toolsInput = $('#course-tools').val().trim();

                // Validation (slug is optional)
                if (!title || !category || !shortDescription || !durationLabel || !formatLabel || !toolsInput) {
                    alert('í•„ìˆ˜ í•„ë“œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                // Load existing registered courses
                const storedCourses = localStorage.getItem('registeredCourses');
                const registeredCourses = storedCourses ? JSON.parse(storedCourses) : [];

                // Validate slug format if provided (lowercase, hyphens only)
                if (slug && !/^[a-z0-9-]+$/.test(slug)) {
                    alert('ìŠ¬ëŸ¬ê·¸ëŠ” ì˜ë¬¸ ì†Œë¬¸ì, ìˆ«ì, í•˜ì´í”ˆ(-)ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                    return;
                }

                // Check if slug already exists (only if slug is provided)
                if (slug) {
                    const existingCourses = typeof COURSES_DATA !== 'undefined' ? COURSES_DATA : [];
                    const allCourses = [...existingCourses, ...registeredCourses];
                    
                    if (allCourses.some(c => c.slug === slug)) {
                        alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìŠ¬ëŸ¬ê·¸ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ìŠ¬ëŸ¬ê·¸ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.');
                        return;
                    }
                }

                // Parse tools (comma-separated)
                const tools = toolsInput.split(',').map(t => t.trim()).filter(t => t.length > 0);

                // Get detailed information
                const fullDescription = $('#course-full-description').val().trim();
                const curriculumInput = $('#course-curriculum').val().trim();
                const deliverablesInput = $('#course-deliverables').val().trim();
                const outcomesInput = $('#course-outcomes').val().trim();

                // Parse curriculum (simple text format: "ì£¼ì°¨: ì œëª©\n- í•­ëª©1\n- í•­ëª©2")
                let curriculum = [];
                if (curriculumInput) {
                    const lines = curriculumInput.split('\n').filter(l => l.trim());
                    let currentSession = null;
                    
                    lines.forEach(line => {
                        const trimmed = line.trim();
                        // Check if this is a new session (contains "ì£¼ì°¨", "ì°¨ì‹œ", "Session", "Part" or starts with number)
                        // Fixed regex patterns: use proper word matching instead of character class
                        const isSessionHeader = trimmed && !trimmed.startsWith('-') && (
                            /^\d+ì£¼ì°¨\s*:?\s*/i.test(trimmed) ||           // "1ì£¼ì°¨:", "1ì£¼ì°¨"
                            /^\d+ì°¨ì‹œ\s*:?\s*/i.test(trimmed) ||           // "1ì°¨ì‹œ:", "1ì°¨ì‹œ"
                            /^Session\s+\d+\s*:?\s*/i.test(trimmed) ||    // "Session 1:", "Session 1"
                            /^Part\s+\d+\s*:?\s*/i.test(trimmed) ||        // "Part 1:", "Part 1"
                            /^\d+\.\s+/.test(trimmed) ||                   // "1. "
                            /^\d+\./.test(trimmed)                          // "1."
                        );
                        
                        if (isSessionHeader) {
                            // New session
                            if (currentSession) {
                                curriculum.push(currentSession);
                            }
                            
                            // Use the whole line as title to preserve the original format including ì£¼ì°¨/ì°¨ì‹œ/Session/Part
                            // This ensures that "1ì£¼ì°¨: ê¸°ì´ˆ" is stored as "1ì£¼ì°¨: ê¸°ì´ˆ" not just "ê¸°ì´ˆ"
                            const title = trimmed;
                            
                            currentSession = {
                                title: title.trim(),
                                items: []
                            };
                        } else if (trimmed.startsWith('-') && currentSession) {
                            // Item
                            currentSession.items.push(trimmed.substring(1).trim());
                        } else if (trimmed && currentSession) {
                            // Item without dash (also support)
                            currentSession.items.push(trimmed);
                        } else if (trimmed && !currentSession) {
                            // First line without session header, create a session
                            currentSession = {
                                title: trimmed,
                                items: []
                            };
                        }
                    });
                    
                    // Add last session
                    if (currentSession) {
                        curriculum.push(currentSession);
                    }
                }

                // Parse deliverables (comma-separated)
                const deliverables = deliverablesInput ? deliverablesInput.split(',').map(d => d.trim()).filter(d => d.length > 0) : [];

                // Parse outcomes (line-separated)
                const outcomes = outcomesInput ? outcomesInput.split('\n').map(o => o.trim()).filter(o => o.length > 0) : [];

                // Create new course object (slug is optional)
                const newCourse = {
                    title: title,
                    category: category,
                    shortDescription: shortDescription,
                    durationLabel: durationLabel,
                    formatLabel: formatLabel,
                    tools: tools
                };
                
                // Add slug only if provided
                if (slug) {
                    newCourse.slug = slug;
                } else {
                    // Generate a unique ID for courses without slug
                    newCourse.id = 'course-' + Date.now();
                }

                // Add detailed information if provided
                if (fullDescription) {
                    newCourse.fullDescription = fullDescription;
                }
                if (curriculum.length > 0) {
                    newCourse.curriculum = curriculum;
                }
                if (deliverables.length > 0) {
                    newCourse.deliverables = deliverables;
                }
                if (outcomes.length > 0) {
                    newCourse.outcomes = outcomes;
                }

                // Save to localStorage
                if (editingCourseId) {
                    // Update existing course
                    const courseIndex = registeredCourses.findIndex(c => 
                        (c.slug === editingCourseId) || (c.id === editingCourseId)
                    );
                    
                    if (courseIndex !== -1) {
                        // Update the course
                        registeredCourses[courseIndex] = {
                            ...registeredCourses[courseIndex],
                            ...newCourse
                        };
                        localStorage.setItem('registeredCourses', JSON.stringify(registeredCourses));
                        
                        // Update course details
                        const detailKey = slug || editingCourseId;
                        const courseDetails = {
                            slug: slug || editingCourseId,
                            fullDescription: fullDescription,
                            curriculum: curriculum,
                            deliverables: deliverables,
                            outcomes: outcomes
                        };
                        const storedDetails = localStorage.getItem('courseDetails');
                        const allDetails = storedDetails ? JSON.parse(storedDetails) : {};
                        // Remove old key if slug changed
                        if (editingCourseId !== detailKey) {
                            delete allDetails[editingCourseId];
                        }
                        allDetails[detailKey] = courseDetails;
                        localStorage.setItem('courseDetails', JSON.stringify(allDetails));
                        
                        // Reload courses
                        loadCourses();
                        closeCourseModal();
                        alert('ê³¼ì •ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    } else {
                        alert('ìˆ˜ì •í•  ê³¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    }
                } else {
                    // Add new course
                    registeredCourses.push(newCourse);
                    localStorage.setItem('registeredCourses', JSON.stringify(registeredCourses));
                    
                    // Also save detailed info separately for easy access
                    if (slug || newCourse.id) {
                        const detailKey = slug || newCourse.id;
                        const courseDetails = {
                            slug: slug || newCourse.id,
                            fullDescription: fullDescription,
                            curriculum: curriculum,
                            deliverables: deliverables,
                            outcomes: outcomes
                        };
                        const storedDetails = localStorage.getItem('courseDetails');
                        const allDetails = storedDetails ? JSON.parse(storedDetails) : {};
                        allDetails[detailKey] = courseDetails;
                        localStorage.setItem('courseDetails', JSON.stringify(allDetails));
                    }

                    // Reload courses to include the new one
                    loadCourses();
                    
                    closeCourseModal();
                    alert('ê³¼ì •ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            } catch (e) {
                console.error('Error saving course:', e);
                alert('ê³¼ì • ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function deleteCourse(identifier) {
            if (!confirm('ì •ë§ë¡œ ì´ ê³¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            try {
                const storedCourses = localStorage.getItem('registeredCourses');
                const registeredCourses = storedCourses ? JSON.parse(storedCourses) : [];
                
                // Filter by slug or id
                const filteredCourses = registeredCourses.filter(c => 
                    (c.slug !== identifier) && (c.id !== identifier)
                );
                localStorage.setItem('registeredCourses', JSON.stringify(filteredCourses));

                // Also remove price if exists
                const storedPrices = localStorage.getItem('coursePrices');
                const prices = storedPrices ? JSON.parse(storedPrices) : {};
                delete prices[identifier];
                localStorage.setItem('coursePrices', JSON.stringify(prices));

                // Reload courses
                loadCourses();
                alert('ê³¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error deleting course:', e);
                alert('ê³¼ì • ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // Schedules Management Functions
        function loadSchedules() {
            try {
                const stored = localStorage.getItem('courseSchedules');
                if (stored) {
                    schedules = JSON.parse(stored);
                } else {
                    schedules = [];
                }
                renderSchedules();
            } catch (e) {
                console.error('Error loading schedules:', e);
                schedules = [];
                renderSchedules();
            }
        }

        function renderSchedules() {
            const tbody = $('#schedules-tbody');
            tbody.empty();

            if (schedules.length === 0) {
                tbody.html('<tr><td colspan="4" class="no-applications">ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            // Load courses to get course names
            let allCourses = [];
            try {
                const storedCourses = localStorage.getItem('registeredCourses');
                if (storedCourses) {
                    allCourses = JSON.parse(storedCourses);
                }
                if (typeof COURSES_DATA !== 'undefined') {
                    allCourses = [...allCourses, ...COURSES_DATA];
                }
            } catch (e) {
                console.error('Error loading courses:', e);
            }

            schedules.forEach(schedule => {
                const date = new Date(schedule.date);
                const dateStr = date.toLocaleDateString('ko-KR');
                const statusClass = schedule.active ? 'status-approved' : 'status-pending';
                const statusText = schedule.active ? 'í™œì„±' : 'ë¹„í™œì„±';
                
                // Find course name
                const course = allCourses.find(c => 
                    (c.slug && c.slug === schedule.courseSlug) || 
                    (c.id && c.id === schedule.courseSlug) ||
                    (c.slug && c.slug === schedule.courseId) ||
                    (c.id && c.id === schedule.courseId)
                );
                const courseName = course ? course.title : (schedule.courseName || schedule.courseSlug || schedule.courseId || 'ì•Œ ìˆ˜ ì—†ìŒ');

                const row = $(`
                    <tr>
                        <td>${courseName}</td>
                        <td>${dateStr}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline" onclick="editSchedule('${schedule.id}')" style="margin-right: 0.5rem;">ìˆ˜ì •</button>
                            <button class="btn btn-sm" style="background: #ef4444; color: white; border: none;" onclick="deleteSchedule('${schedule.id}')">ì‚­ì œ</button>
                        </td>
                    </tr>
                `);
                tbody.append(row);
            });
        }

        function addSchedule() {
            currentScheduleId = null;
            $('#schedule-modal-title').text('ì¼ì • ì¶”ê°€');
            $('#schedule-date').val('');
            $('#schedule-active').prop('checked', true);
            
            // Load courses into dropdown
            loadCoursesForSchedule();
            
            $('#schedule-modal').css('display', 'flex');
        }
        
        function loadCoursesForSchedule() {
            const $courseSelect = $('#schedule-course');
            $courseSelect.empty();
            $courseSelect.append('<option value="">ê³¼ì •ì„ ì„ íƒí•˜ì„¸ìš”</option>');
            
            try {
                // Load registered courses
                const storedCourses = localStorage.getItem('registeredCourses');
                let allCourses = [];
                
                if (storedCourses) {
                    const registeredCourses = JSON.parse(storedCourses);
                    allCourses = [...allCourses, ...registeredCourses];
                }
                
                // Load COURSES_DATA if available
                if (typeof COURSES_DATA !== 'undefined') {
                    allCourses = [...allCourses, ...COURSES_DATA];
                }
                
                // Remove duplicates based on slug or id
                const uniqueCourses = [];
                const seen = new Set();
                allCourses.forEach(course => {
                    const identifier = course.slug || course.id;
                    if (identifier && !seen.has(identifier)) {
                        seen.add(identifier);
                        uniqueCourses.push(course);
                    }
                });
                
                // Sort by title
                uniqueCourses.sort((a, b) => (a.title || '').localeCompare(b.title || ''));
                
                // Add to dropdown
                uniqueCourses.forEach(course => {
                    const identifier = course.slug || course.id;
                    const title = course.title || 'ì œëª© ì—†ìŒ';
                    $courseSelect.append(`<option value="${identifier}">${title}</option>`);
                });
                
                if (uniqueCourses.length === 0) {
                    $courseSelect.append('<option value="" disabled>ë“±ë¡ëœ ê³¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</option>');
                }
            } catch (e) {
                console.error('Error loading courses for schedule:', e);
                $courseSelect.append('<option value="" disabled>ê³¼ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</option>');
            }
        }

        function editSchedule(id) {
            const schedule = schedules.find(s => s.id === id);
            if (!schedule) {
                alert('ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            currentScheduleId = id;
            $('#schedule-modal-title').text('ì¼ì • ìˆ˜ì •');
            
            // Load courses into dropdown
            loadCoursesForSchedule();
            
            // Set selected course
            const courseIdentifier = schedule.courseSlug || schedule.courseId;
            if (courseIdentifier) {
                $('#schedule-course').val(courseIdentifier);
            }
            
            $('#schedule-date').val(schedule.date);
            $('#schedule-active').prop('checked', schedule.active !== false);
            $('#schedule-modal').css('display', 'flex');
        }

        function deleteSchedule(id) {
            if (!confirm('ì •ë§ë¡œ ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            try {
                const index = schedules.findIndex(s => s.id === id);
                if (index === -1) {
                    alert('ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                schedules.splice(index, 1);
                localStorage.setItem('courseSchedules', JSON.stringify(schedules));
                renderSchedules();
                alert('ì¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error deleting schedule:', e);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function saveSchedule() {
            try {
                const courseIdentifier = $('#schedule-course').val();
                const date = $('#schedule-date').val();
                const active = $('#schedule-active').is(':checked');

                if (!courseIdentifier) {
                    alert('ê³¼ì •ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (!date) {
                    alert('ì‹œì‘ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                // Get course name for display
                let courseName = '';
                try {
                    const storedCourses = localStorage.getItem('registeredCourses');
                    let allCourses = [];
                    if (storedCourses) {
                        allCourses = [...allCourses, ...JSON.parse(storedCourses)];
                    }
                    if (typeof COURSES_DATA !== 'undefined') {
                        allCourses = [...allCourses, ...COURSES_DATA];
                    }
                    const course = allCourses.find(c => 
                        (c.slug && c.slug === courseIdentifier) || 
                        (c.id && c.id === courseIdentifier)
                    );
                    courseName = course ? course.title : '';
                } catch (e) {
                    console.error('Error getting course name:', e);
                }

                if (currentScheduleId) {
                    // Update existing schedule
                    const schedule = schedules.find(s => s.id === currentScheduleId);
                    if (schedule) {
                        schedule.courseSlug = courseIdentifier;
                        schedule.courseId = courseIdentifier;
                        schedule.courseName = courseName;
                        schedule.date = date;
                        schedule.active = active;
                        schedule.updatedAt = new Date().toISOString();
                    }
                } else {
                    // Add new schedule
                    const newSchedule = {
                        id: Date.now().toString(),
                        courseSlug: courseIdentifier,
                        courseId: courseIdentifier,
                        courseName: courseName,
                        date: date,
                        active: active,
                        createdAt: new Date().toISOString()
                    };
                    schedules.push(newSchedule);
                }

                localStorage.setItem('courseSchedules', JSON.stringify(schedules));
                renderSchedules();
                $('#schedule-modal').hide();
                alert('ì¼ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error saving schedule:', e);
                alert('ì¼ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // Instructor Program Management Functions
        function loadInstructorProgram() {
            try {
                // Load program info
                const storedProgram = localStorage.getItem('instructorProgram');
                if (storedProgram) {
                    instructorProgram = JSON.parse(storedProgram);
                    $('#instructor-program-title').val(instructorProgram.title || 'ê°•ì‚¬ ì„±ì¥ í”„ë¡œê·¸ë¨');
                    $('#instructor-program-description').val(instructorProgram.description || '');
                } else {
                    instructorProgram = {
                        title: 'ê°•ì‚¬ ì„±ì¥ í”„ë¡œê·¸ë¨',
                        description: 'ì „ë¬¸ ê°•ì‚¬ë¡œ ì„±ì¥í•˜ê¸° ìœ„í•œ ì²´ê³„ì ì¸ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.'
                    };
                }

                // Load schedules
                const storedSchedules = localStorage.getItem('instructorSchedules');
                if (storedSchedules) {
                    instructorSchedules = JSON.parse(storedSchedules);
                } else {
                    instructorSchedules = [];
                }

                // Load consult schedules
                const storedConsultSchedules = localStorage.getItem('consultSchedules');
                if (storedConsultSchedules) {
                    consultSchedules = JSON.parse(storedConsultSchedules);
                } else {
                    consultSchedules = [];
                }

                renderInstructorSchedules();
                renderConsultSchedules();
            } catch (e) {
                console.error('Error loading instructor program:', e);
                instructorProgram = { title: 'ê°•ì‚¬ ì„±ì¥ í”„ë¡œê·¸ë¨', description: '' };
                instructorSchedules = [];
                consultSchedules = [];
                renderInstructorSchedules();
                renderConsultSchedules();
            }
        }

        function saveProgramInfo() {
            try {
                instructorProgram = {
                    title: $('#instructor-program-title').val() || 'ê°•ì‚¬ ì„±ì¥ í”„ë¡œê·¸ë¨',
                    description: $('#instructor-program-description').val() || ''
                };
                localStorage.setItem('instructorProgram', JSON.stringify(instructorProgram));
                alert('í”„ë¡œê·¸ë¨ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error saving program info:', e);
                alert('í”„ë¡œê·¸ë¨ ì •ë³´ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function renderInstructorSchedules() {
            const tbody = $('#instructor-schedules-tbody');
            tbody.empty();

            if (instructorSchedules.length === 0) {
                tbody.html('<tr><td colspan="3" class="no-applications">ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            instructorSchedules.forEach(schedule => {
                const date = new Date(schedule.date);
                const dateStr = date.toLocaleDateString('ko-KR');
                const statusClass = schedule.active ? 'status-approved' : 'status-pending';
                const statusText = schedule.active ? 'í™œì„±' : 'ë¹„í™œì„±';

                const row = $(`
                    <tr>
                        <td>${dateStr}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline" onclick="editInstructorSchedule('${schedule.id}')" style="margin-right: 0.5rem;">ìˆ˜ì •</button>
                            <button class="btn btn-sm" style="background: #ef4444; color: white; border: none;" onclick="deleteInstructorSchedule('${schedule.id}')">ì‚­ì œ</button>
                        </td>
                    </tr>
                `);
                tbody.append(row);
            });
        }

        function renderConsultSchedules() {
            const tbody = $('#consult-schedules-tbody');
            tbody.empty();

            if (consultSchedules.length === 0) {
                tbody.html('<tr><td colspan="4" class="no-applications">ìƒë‹´ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            consultSchedules.forEach(schedule => {
                const date = new Date(schedule.date);
                const dateStr = date.toLocaleDateString('ko-KR');
                const statusClass = schedule.active ? 'status-approved' : 'status-pending';
                const statusText = schedule.active ? 'í™œì„±' : 'ë¹„í™œì„±';

                const row = $(`
                    <tr>
                        <td>${dateStr}</td>
                        <td>${schedule.time || '-'}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline" onclick="editConsultSchedule('${schedule.id}')" style="margin-right: 0.5rem;">ìˆ˜ì •</button>
                            <button class="btn btn-sm" style="background: #ef4444; color: white; border: none;" onclick="deleteConsultSchedule('${schedule.id}')">ì‚­ì œ</button>
                        </td>
                    </tr>
                `);
                tbody.append(row);
            });
        }

        function addInstructorSchedule() {
            currentInstructorScheduleId = null;
            $('#instructor-schedule-modal-title').text('í”„ë¡œê·¸ë¨ ì¼ì • ì¶”ê°€');
            $('#instructor-schedule-date').val('');
            $('#instructor-schedule-active').prop('checked', true);
            $('#instructor-schedule-modal').css('display', 'flex');
        }

        function editInstructorSchedule(id) {
            const schedule = instructorSchedules.find(s => s.id === id);
            if (!schedule) {
                alert('ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            currentInstructorScheduleId = id;
            $('#instructor-schedule-modal-title').text('í”„ë¡œê·¸ë¨ ì¼ì • ìˆ˜ì •');
            $('#instructor-schedule-date').val(schedule.date);
            $('#instructor-schedule-active').prop('checked', schedule.active);
            $('#instructor-schedule-modal').css('display', 'flex');
        }

        function deleteInstructorSchedule(id) {
            if (!confirm('ì •ë§ë¡œ ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            try {
                const index = instructorSchedules.findIndex(s => s.id === id);
                if (index === -1) {
                    alert('ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                instructorSchedules.splice(index, 1);
                localStorage.setItem('instructorSchedules', JSON.stringify(instructorSchedules));
                renderInstructorSchedules();
                alert('ì¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error deleting instructor schedule:', e);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function saveInstructorSchedule() {
            try {
                const date = $('#instructor-schedule-date').val();
                const active = $('#instructor-schedule-active').is(':checked');

                if (!date) {
                    alert('ì¼ì •ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (currentInstructorScheduleId) {
                    const schedule = instructorSchedules.find(s => s.id === currentInstructorScheduleId);
                    if (schedule) {
                        schedule.date = date;
                        schedule.active = active;
                    }
                } else {
                    const newSchedule = {
                        id: Date.now().toString(),
                        date: date,
                        active: active,
                        createdAt: new Date().toISOString()
                    };
                    instructorSchedules.push(newSchedule);
                }

                localStorage.setItem('instructorSchedules', JSON.stringify(instructorSchedules));
                renderInstructorSchedules();
                $('#instructor-schedule-modal').hide();
                alert('ì¼ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error saving instructor schedule:', e);
                alert('ì¼ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function addConsultSchedule() {
            currentConsultScheduleId = null;
            $('#consult-schedule-modal-title').text('ìƒë‹´ ì¼ì • ì¶”ê°€');
            $('#consult-schedule-date').val('');
            $('#consult-schedule-time').val('');
            $('#consult-schedule-active').prop('checked', true);
            $('#consult-schedule-modal').css('display', 'flex');
        }

        function editConsultSchedule(id) {
            const schedule = consultSchedules.find(s => s.id === id);
            if (!schedule) {
                alert('ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            currentConsultScheduleId = id;
            $('#consult-schedule-modal-title').text('ìƒë‹´ ì¼ì • ìˆ˜ì •');
            $('#consult-schedule-date').val(schedule.date);
            $('#consult-schedule-time').val(schedule.time || '');
            $('#consult-schedule-active').prop('checked', schedule.active);
            $('#consult-schedule-modal').css('display', 'flex');
        }

        function deleteConsultSchedule(id) {
            if (!confirm('ì •ë§ë¡œ ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            try {
                const index = consultSchedules.findIndex(s => s.id === id);
                if (index === -1) {
                    alert('ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                consultSchedules.splice(index, 1);
                localStorage.setItem('consultSchedules', JSON.stringify(consultSchedules));
                renderConsultSchedules();
                alert('ì¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error deleting consult schedule:', e);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function saveConsultSchedule() {
            try {
                const date = $('#consult-schedule-date').val();
                const time = $('#consult-schedule-time').val();
                const active = $('#consult-schedule-active').is(':checked');

                if (!date) {
                    alert('ì¼ì •ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (!time) {
                    alert('ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (currentConsultScheduleId) {
                    const schedule = consultSchedules.find(s => s.id === currentConsultScheduleId);
                    if (schedule) {
                        schedule.date = date;
                        schedule.time = time;
                        schedule.active = active;
                    }
                } else {
                    const newSchedule = {
                        id: Date.now().toString(),
                        date: date,
                        time: time,
                        active: active,
                        createdAt: new Date().toISOString()
                    };
                    consultSchedules.push(newSchedule);
                }

                localStorage.setItem('consultSchedules', JSON.stringify(consultSchedules));
                renderConsultSchedules();
                $('#consult-schedule-modal').hide();
                alert('ì¼ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error saving consult schedule:', e);
                alert('ì¼ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // Auto-register AI Workshop course if not exists
        function autoRegisterAIWorkshop() {
            try {
                const courseData = {
                    id: 'ai-workshop-' + Date.now(),
                    slug: 'ai-workshop',
                    title: 'AI ì „ë¬¸ê°€ê³¼ì • Workshop',
                    category: 'ì „ë¬¸ê°€ê³¼ì •',
                    shortDescription: 'ìƒì„±í˜• AI ì‹¤ë¬´ë¶€í„° ì—ì´ì „íŠ¸ ê°œë°œê¹Œì§€, 8ì£¼ ì™„ì„± ì‹¤ìŠµ ê³¼ì •',
                    durationLabel: '8ì£¼ 16íšŒ (íšŒë‹¹ 3ì‹œê°„)',
                    formatLabel: 'ì˜¨/ì˜¤í”„ë¼ì¸ ë³‘í–‰',
                    tools: ['ChatGPT', 'Claude', 'Notion', 'Cursor AI', 'GitHub', 'CapCut', 'Gemini', 'Opal']
                };

                const courseDetails = {
                    slug: 'ai-workshop',
                    fullDescription: `2026 AI ì „ë¬¸ê°•ì‚¬ Workshopì€ ìƒì„±í˜• AI ì‹¤ë¬´ë¶€í„° ì—ì´ì „íŠ¸ ê°œë°œê¹Œì§€ 8ì£¼ ë™ì•ˆ ì²´ê³„ì ìœ¼ë¡œ í•™ìŠµí•˜ëŠ” ì‹¤ìŠµ ì¤‘ì‹¬ ê³¼ì •ì…ë‹ˆë‹¤.\n\nì´ë¡  40%ì™€ ì‹¤ìŠµ 60%ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ì†Œìˆ˜ì •ì˜ˆ(20ëª…)ë¡œ ìš´ì˜ë˜ì–´ ê°œë³„ ë§ì¶¤í˜• í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê° ì£¼ì°¨ë³„ë¡œ ì‹¤ì œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©°, ìµœì¢…ì ìœ¼ë¡œëŠ” ìì‹ ë§Œì˜ AI ì›¹ì‚¬ì´íŠ¸ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬ê¹Œì§€ ì™„ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
                    curriculum: [
                        { title: '1ì£¼ì°¨: í”„ë¡¬í”„íŠ¸ ê¸°ì´ˆ', items: ['Role Prompting', 'CoT (Chain of Thought)', 'êµ¬ì¡°í™” í”„ë ˆì„', 'Iterative Refinement'] },
                        { title: '2ì£¼ì°¨: ë…¸ì½”ë“œ ë°ì´í„° ë¶„ì„/ì‹œê°í™”', items: ['ChatGPTÂ·GensparkÂ·Canva Sheet í™œìš©', 'EDA (Exploratory Data Analysis)', 'ë°ì´í„° ì‹œê°í™” ê¸°ë²•'] },
                        { title: '3ì£¼ì°¨: Notion + Claude MCP + DB ìë™í™”', items: ['Notion AI í™œìš©', 'DB ì„¤ê³„ ë° ìë™í™”', 'Claude MCP ì—°ë™'] },
                        { title: '4ì£¼ì°¨: AI ì˜ìƒ ì œì‘', items: ['ChatGPT í™œìš©', 'CapCut ì˜ìƒ í¸ì§‘', 'Nanobanana Pro', 'Google Gemini Flow'] },
                        { title: '5ì£¼ì°¨: Cursor AI ë°”ì´ë¸Œì½”ë”©ìœ¼ë¡œ MVP/ì›¹ì‚¬ì´íŠ¸ ì œì‘ + QA', items: ['Cursor AIë¥¼ í™œìš©í•œ MVP ì œì‘', 'ì›¹ì‚¬ì´íŠ¸ ì œì‘', 'QA í”„ë¡œì„¸ìŠ¤'] },
                        { title: '6ì£¼ì°¨: AI Agent Builder', items: ['ì—ì´ì „íŠ¸ ì„¤ê³„/ìë™í™”', 'Opal/Gemini íë¦„ í¬í•¨', 'ì‹¤ì „ ì—ì´ì „íŠ¸ êµ¬ì¶•'] },
                        { title: '7ì£¼ì°¨: App/WebÂ·e-Commerce í”„ë¡œí† íƒ€ì… + GitHub ì—°ë™', items: ['Cursor/Antigravity ë¹„êµ', 'GitHub ì—°ë™', 'í”„ë¡œí† íƒ€ì… ê°œë°œ'] },
                        { title: '8ì£¼ì°¨: Git/GitHub Pages ë°°í¬ + ë„ë©”ì¸/DNS ê¸°ì´ˆ', items: ['Git/GitHub Pagesë¥¼ í™œìš©í•œ ë°°í¬', 'ë„ë©”ì¸/DNS ê¸°ì´ˆ', 'ìµœì¢… í”„ë¡œì íŠ¸ ë°°í¬'] }
                    ],
                    deliverables: ['í”„ë¡¬í”„íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬', 'ë°ì´í„° ë¶„ì„ ëŒ€ì‹œë³´ë“œ', 'Notion ìë™í™” ì‹œìŠ¤í…œ', 'AI ì˜ìƒ ì½˜í…ì¸ ', 'MVP ì›¹ì‚¬ì´íŠ¸', 'AI ì—ì´ì „íŠ¸', 'e-Commerce í”„ë¡œí† íƒ€ì…', 'ë°°í¬ëœ ìµœì¢… í”„ë¡œì íŠ¸'],
                    outcomes: ['ìƒì„±í˜• AI ë„êµ¬ë¥¼ ì‹¤ë¬´ì— í™œìš©í•  ìˆ˜ ìˆëŠ” ì—­ëŸ‰ í™•ë³´', 'ë…¸ì½”ë“œ/ë¡œìš°ì½”ë“œ ë„êµ¬ë¥¼ í™œìš©í•œ í”„ë¡œì íŠ¸ êµ¬ì¶• ëŠ¥ë ¥', 'AI ì—ì´ì „íŠ¸ ì„¤ê³„ ë° ê°œë°œ ì—­ëŸ‰', 'ì‹¤ì „ í”„ë¡œì íŠ¸ ê²½í—˜ì„ í†µí•œ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì¶•', 'Git/GitHubë¥¼ í™œìš©í•œ ë°°í¬ ë° ìš´ì˜ ì—­ëŸ‰', 'AI ì „ë¬¸ê°•ì‚¬ë¡œì„œì˜ ì‹¤ë¬´ ì—­ëŸ‰ ê°•í™”']
                };

                const storedCourses = localStorage.getItem('registeredCourses');
                const registeredCourses = storedCourses ? JSON.parse(storedCourses) : [];
                
                const existingIndex = registeredCourses.findIndex(c => 
                    c.slug === courseData.slug || 
                    (c.id && c.id.startsWith('ai-workshop')) ||
                    c.title === courseData.title
                );
                
                if (existingIndex >= 0) {
                    registeredCourses[existingIndex] = courseData;
                } else {
                    registeredCourses.push(courseData);
                }
                
                localStorage.setItem('registeredCourses', JSON.stringify(registeredCourses));
                
                const storedDetails = localStorage.getItem('courseDetails');
                const allDetails = storedDetails ? JSON.parse(storedDetails) : {};
                allDetails[courseData.slug] = courseDetails;
                allDetails[courseData.id] = courseDetails;
                localStorage.setItem('courseDetails', JSON.stringify(allDetails));
                
                const storedPrices = localStorage.getItem('coursePrices');
                const prices = storedPrices ? JSON.parse(storedPrices) : {};
                prices[courseData.slug] = 550000;
                prices[courseData.id] = 550000;
                localStorage.setItem('coursePrices', JSON.stringify(prices));
                
                console.log('âœ… AI ì „ë¬¸ê°€ê³¼ì • Workshopì´ ìë™ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('AI Workshop ìë™ ë“±ë¡ ì˜¤ë¥˜:', e);
            }
        }

        // Event handlers for modals
        $(document).ready(function() {
            // Auto-register AI Workshop on page load
            autoRegisterAIWorkshop();
            // Schedule modal handlers
            $('#add-schedule-btn').on('click', addSchedule);
            $('#schedule-form').on('submit', function(e) {
                e.preventDefault();
                saveSchedule();
            });
            $('#cancel-schedule-btn, #close-schedule-modal, #schedule-modal-backdrop').on('click', function() {
                $('#schedule-modal').hide();
            });

            // Instructor schedule modal handlers
            $('#add-instructor-schedule-btn').on('click', addInstructorSchedule);
            $('#instructor-schedule-form').on('submit', function(e) {
                e.preventDefault();
                saveInstructorSchedule();
            });
            $('#cancel-instructor-schedule-btn, #close-instructor-schedule-modal, #instructor-schedule-modal-backdrop').on('click', function() {
                $('#instructor-schedule-modal').hide();
            });

            // Consult schedule modal handlers
            $('#add-consult-schedule-btn').on('click', addConsultSchedule);
            $('#consult-schedule-form').on('submit', function(e) {
                e.preventDefault();
                saveConsultSchedule();
            });
            $('#cancel-consult-schedule-btn, #close-consult-schedule-modal, #consult-schedule-modal-backdrop').on('click', function() {
                $('#consult-schedule-modal').hide();
            });

            // Course registration modal handlers
            $('#add-course-btn').on('click', function() {
                openCourseModal(null); // Explicitly pass null for new course
            });
            $('#course-form').on('submit', function(e) {
                e.preventDefault();
                saveCourse();
            });
            $('#cancel-course-btn, #close-course-modal, #course-modal-backdrop').on('click', function() {
                closeCourseModal();
            });

            // íšŒì› ìˆ˜ì • ëª¨ë‹¬ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
            $('#cancel-user-edit-btn, #close-user-edit-modal, #user-edit-modal-backdrop').on('click', function() {
                closeUserEditModal();
            });

            // íšŒì› ìˆ˜ì • í¼ ì œì¶œ
            $('#user-edit-form').on('submit', function(e) {
                e.preventDefault();
                saveUserEdit();
            });

            // ê°€ì… ë°©ë²• ë³€ê²½ ì‹œ ì†Œì…œ ì œê³µì í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
            $('#user-edit-auth-method').on('change', function() {
                if ($(this).val() === 'social') {
                    $('#user-edit-auth-provider-group').show();
                } else {
                    $('#user-edit-auth-provider-group').hide();
                }
            });

            // Program info save handler
            $('#save-program-info-btn').on('click', saveProgramInfo);

            // Workshop applications handlers
            $('#workshop-search-input').on('input', filterWorkshopApplications);
            $('#workshop-status-filter, #workshop-curriculum-filter').on('change', filterWorkshopApplications);
        });

        // Workshop Applications Management Functions
        let workshopApplications = [];

        function loadWorkshopApplications() {
            try {
                const stored = localStorage.getItem('aiw-applications');
                workshopApplications = stored ? JSON.parse(stored) : [];
                if (!Array.isArray(workshopApplications)) {
                    workshopApplications = [];
                }
                updateWorkshopStatistics();
                renderWorkshopApplications();
            } catch (e) {
                console.error('Error loading workshop applications:', e);
                workshopApplications = [];
                updateWorkshopStatistics();
                renderWorkshopApplications();
            }
        }

        function updateWorkshopStatistics() {
            const total = workshopApplications.length;
            const pending = workshopApplications.filter(a => a.status === 'pending').length;
            const approved = workshopApplications.filter(a => a.status === 'approved').length;
            const curriculumRequest = workshopApplications.filter(a => a.curriculumRequest).length;

            $('#total-workshop-applications').text(total);
            $('#pending-workshop-applications').text(pending);
            $('#approved-workshop-applications').text(approved);
            $('#curriculum-request-count').text(curriculumRequest);
        }

        function renderWorkshopApplications() {
            const $tbody = $('#workshop-applications-tbody');
            $tbody.empty();

            if (workshopApplications.length === 0) {
                $tbody.html('<tr><td colspan="6" class="no-applications">ì„¤ëª…íšŒ ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            workshopApplications.forEach(function(app) {
                const date = new Date(app.createdAt);
                const dateStr = date.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                const statusClass = app.status === 'approved' ? 'status-approved' : 
                                   app.status === 'rejected' ? 'status-rejected' : 'status-pending';
                const statusText = app.status === 'approved' ? 'ìŠ¹ì¸ë¨' : 
                                  app.status === 'rejected' ? 'ê±°ì ˆë¨' : 'ëŒ€ê¸° ì¤‘';

                const $row = $('<tr>').html(`
                    <td>${dateStr}</td>
                    <td>${app.name || '-'}</td>
                    <td>${app.phone || '-'}</td>
                    <td>${app.curriculumRequest ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>
                        <button class="btn btn-sm" onclick="showWorkshopDetail('${app.id}')" style="margin-right: 0.5rem;">ìƒì„¸ë³´ê¸°</button>
                        <button class="btn btn-sm" onclick="deleteWorkshopApplication('${app.id}')" style="background: #ef4444; color: white;">ì‚­ì œ</button>
                    </td>
                `);
                $tbody.append($row);
            });
        }

        function filterWorkshopApplications() {
            const searchTerm = $('#workshop-search-input').val().toLowerCase();
            const statusFilter = $('#workshop-status-filter').val();
            const curriculumFilter = $('#workshop-curriculum-filter').val();

            const filtered = workshopApplications.filter(function(app) {
                const matchesSearch = !searchTerm || 
                    (app.name && app.name.toLowerCase().includes(searchTerm)) ||
                    (app.phone && app.phone.includes(searchTerm));
                const matchesStatus = !statusFilter || app.status === statusFilter;
                const matchesCurriculum = !curriculumFilter || 
                    (curriculumFilter === 'true' && app.curriculumRequest) ||
                    (curriculumFilter === 'false' && !app.curriculumRequest);

                return matchesSearch && matchesStatus && matchesCurriculum;
            });

            const $tbody = $('#workshop-applications-tbody');
            $tbody.empty();

            if (filtered.length === 0) {
                $tbody.html('<tr><td colspan="6" class="no-applications">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
                return;
            }

            filtered.forEach(function(app) {
                const date = new Date(app.createdAt);
                const dateStr = date.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                const statusClass = app.status === 'approved' ? 'status-approved' : 
                                   app.status === 'rejected' ? 'status-rejected' : 'status-pending';
                const statusText = app.status === 'approved' ? 'ìŠ¹ì¸ë¨' : 
                                  app.status === 'rejected' ? 'ê±°ì ˆë¨' : 'ëŒ€ê¸° ì¤‘';

                const $row = $('<tr>').html(`
                    <td>${dateStr}</td>
                    <td>${app.name || '-'}</td>
                    <td>${app.phone || '-'}</td>
                    <td>${app.curriculumRequest ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>
                        <button class="btn btn-sm" onclick="showWorkshopDetail('${app.id}')" style="margin-right: 0.5rem;">ìƒì„¸ë³´ê¸°</button>
                        <button class="btn btn-sm" onclick="deleteWorkshopApplication('${app.id}')" style="background: #ef4444; color: white;">ì‚­ì œ</button>
                    </td>
                `);
                $tbody.append($row);
            });
        }

        function showWorkshopDetail(id) {
            const app = workshopApplications.find(a => a.id === id);
            if (!app) {
                alert('ì‹ ì²­ ë‚´ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            const date = new Date(app.createdAt);
            const dateStr = date.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            const statusClass = app.status === 'approved' ? 'status-approved' : 
                               app.status === 'rejected' ? 'status-rejected' : 'status-pending';
            const statusText = app.status === 'approved' ? 'ìŠ¹ì¸ë¨' : 
                              app.status === 'rejected' ? 'ê±°ì ˆë¨' : 'ëŒ€ê¸° ì¤‘';

            $('#detail-content').html(`
                <div class="detail-row">
                    <div class="detail-label">ì‹ ì²­ì¼ì‹œ</div>
                    <div>${dateStr}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ì‹ ì²­ ìœ í˜•</div>
                    <div>2026 AI Instructor Workshop ì„¤ëª…íšŒ</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ì´ë¦„</div>
                    <div>${app.name || '-'}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ì—°ë½ì²˜</div>
                    <div>${app.phone || '-'}</div>
                </div>
                ${app.curriculumRequest ? `
                <div class="detail-row">
                    <div class="detail-label">ì»¤ë¦¬í˜ëŸ¼ ìš”ì²­</div>
                    <div>ì˜ˆ</div>
                </div>
                ` : ''}
                <div class="detail-row">
                    <div class="detail-label">ìƒíƒœ</div>
                    <div><span class="status-badge ${statusClass}">${statusText}</span></div>
                </div>
            `);

            $('#approve-btn').off('click').on('click', function() {
                updateWorkshopApplicationStatus(id, 'approved');
            });

            $('#reject-btn').off('click').on('click', function() {
                updateWorkshopApplicationStatus(id, 'rejected');
            });

            $('#detail-modal').css('display', 'flex');
        }

        function updateWorkshopApplicationStatus(id, status) {
            try {
                const index = workshopApplications.findIndex(a => a.id === id);
                if (index === -1) {
                    alert('ì‹ ì²­ ë‚´ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                workshopApplications[index].status = status;
                localStorage.setItem('aiw-applications', JSON.stringify(workshopApplications));
                
                updateWorkshopStatistics();
                renderWorkshopApplications();
                $('#detail-modal').hide();
                alert('ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error updating workshop application status:', e);
                alert('ìƒíƒœ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function deleteWorkshopApplication(id) {
            if (!confirm('ì •ë§ë¡œ ì´ ì‹ ì²­ ë‚´ì—­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            try {
                const index = workshopApplications.findIndex(a => a.id === id);
                if (index === -1) {
                    alert('ì‹ ì²­ ë‚´ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                workshopApplications.splice(index, 1);
                localStorage.setItem('aiw-applications', JSON.stringify(workshopApplications));
                
                updateWorkshopStatistics();
                renderWorkshopApplications();
                alert('ì‹ ì²­ ë‚´ì—­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('Error deleting workshop application:', e);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
    </script>
</body>
</html>

