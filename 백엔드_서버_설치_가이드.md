# 백엔드 서버 설치 및 실행 가이드

## 📋 사전 요구사항

- Node.js 14.x 이상
- npm 또는 yarn

## 🚀 설치 방법

### 1. 의존성 패키지 설치

```bash
npm install
```

또는

```bash
npm install express cors axios dotenv
```

### 2. 환경 변수 설정

`.env.example` 파일을 `.env`로 복사하고 실제 OAuth 설정 값을 입력하세요:

```bash
# Windows
copy .env.example .env

# Mac/Linux
cp .env.example .env
```

`.env` 파일 내용 예시:

```env
# Google OAuth
GOOGLE_CLIENT_ID=123456789-abcdefghijklmnop.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-abcdefghijklmnopqrstuvwxyz

# Naver OAuth
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret

# Kakao OAuth
KAKAO_REST_API_KEY=your_kakao_rest_api_key

# 서버 포트
PORT=3000
```

### 3. 서버 실행

```bash
npm start
```

또는 개발 모드 (자동 재시작):

```bash
npm run dev
```

서버가 시작되면 다음 메시지가 표시됩니다:

```
🚀 서버가 시작되었습니다!
📍 포트: 3000
🌐 URL: http://localhost:3000
```

## 🔧 OAuth 설정 방법

### Google OAuth 설정

1. [Google Cloud Console](https://console.cloud.google.com/) 접속
2. 프로젝트 생성 또는 선택
3. **APIs & Services** > **Credentials** 이동
4. **Create Credentials** > **OAuth client ID** 선택
5. **Application type**: Web application 선택
6. **Authorized redirect URIs**에 추가:
   ```
   http://localhost:3000/html/auth/oauth-callback.html?provider=google
   https://www.irumcompany.co.kr/html/auth/oauth-callback.html?provider=google
   ```
7. **Client ID**와 **Client Secret**을 `.env` 파일에 입력

### Naver OAuth 설정

1. [Naver Developers](https://developers.naver.com/apps/#/register) 접속
2. 애플리케이션 등록
3. **Callback URL** 설정:
   ```
   http://localhost:3000/html/auth/oauth-callback.html?provider=naver
   https://www.irumcompany.co.kr/html/auth/oauth-callback.html?provider=naver
   ```
4. **Client ID**와 **Client Secret**을 `.env` 파일에 입력

### Kakao OAuth 설정

1. [Kakao Developers](https://developers.kakao.com/) 접속
2. 내 애플리케이션 > 애플리케이션 추가하기
3. **플랫폼 설정**에서 Web 플랫폼 등록
4. **Redirect URI** 등록:
   ```
   http://localhost:3000/html/auth/oauth-callback.html?provider=kakao
   https://www.irumcompany.co.kr/html/auth/oauth-callback.html?provider=kakao
   ```
5. **REST API 키**를 `.env` 파일에 입력

## 📝 프론트엔드 설정

`js/oauth-config.js` 파일에서 각 provider를 활성화하세요:

```javascript
const OAUTH_CONFIG = {
    google: {
        enabled: true, // true로 변경
        clientId: 'YOUR_GOOGLE_CLIENT_ID', // 실제 Client ID로 변경
        redirectUri: SITE_DOMAIN + '/html/auth/oauth-callback.html?provider=google'
    },
    naver: {
        enabled: true, // true로 변경
        clientId: 'YOUR_NAVER_CLIENT_ID', // 실제 Client ID로 변경
        redirectUri: SITE_DOMAIN + '/html/auth/oauth-callback.html?provider=naver'
    },
    kakao: {
        enabled: true, // true로 변경
        clientId: 'YOUR_KAKAO_REST_API_KEY', // 실제 REST API 키로 변경
        redirectUri: SITE_DOMAIN + '/html/auth/oauth-callback.html?provider=kakao'
    }
};
```

## 🧪 테스트

1. 서버 실행: `npm start`
2. 브라우저에서 `http://localhost:3000/html/auth/login.html` 접속
3. 소셜 로그인 버튼 클릭
4. OAuth 제공자 페이지에서 로그인
5. 콜백 후 사용자 정보가 자동으로 저장되는지 확인

## 🔍 문제 해결

### 서버가 시작되지 않음

- Node.js 버전 확인: `node --version` (14.x 이상 필요)
- 포트 3000이 이미 사용 중인지 확인
- `.env` 파일이 올바른 위치에 있는지 확인

### OAuth 로그인 실패

- `.env` 파일의 Client ID와 Client Secret 확인
- Redirect URI가 OAuth 제공자 설정과 정확히 일치하는지 확인
- 서버 콘솔에서 에러 메시지 확인

### CORS 오류

- `server.js`의 CORS 설정 확인
- 프론트엔드와 백엔드가 같은 도메인에서 실행되는지 확인

## 📦 프로덕션 배포

프로덕션 환경에서는:

1. 환경 변수를 서버 환경에 설정
2. HTTPS 사용 (OAuth는 HTTPS 필수)
3. 보안 헤더 설정
4. 로깅 및 모니터링 추가
5. PM2 등 프로세스 매니저 사용

## 🔐 보안 주의사항

- **절대** `.env` 파일을 Git에 커밋하지 마세요
- `.gitignore`에 `.env` 추가
- Client Secret은 백엔드에서만 사용
- 프로덕션에서는 환경 변수로 관리





